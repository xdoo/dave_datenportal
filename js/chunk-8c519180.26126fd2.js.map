{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/component/gridSimple.js","webpack:///./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/visualMapPiecewise.js","webpack:///./node_modules/echarts/lib/visual/visualSolution.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack:///./node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/chart/heatmap/HeatmapView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/dataZoom/helper.js","webpack:///./node_modules/echarts/lib/component/visualMap.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/chart/heatmap.js","webpack:///./node_modules/echarts/lib/visual/VisualMapping.js","webpack:///./node_modules/echarts/lib/visual/visualDefault.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/typeDefaulter.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack:///./node_modules/echarts/lib/component/visualMapContinuous.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack:///./node_modules/echarts/lib/component/axis.js","webpack:///./node_modules/echarts/lib/component/toolbox.js","webpack:///./src/components/charts/Heatmap.vue?4007","webpack:///./src/components/charts/Heatmap.vue?1286","webpack:///./src/components/charts/Heatmap.vue?c4f2","webpack:///./src/components/charts/Heatmap.vue?989f","webpack:///./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack:///./node_modules/echarts/lib/component/visualMap/typeDefaulter.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/component/visualMap/helper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack:///./node_modules/echarts/lib/component/grid.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/dataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./src/components/charts/Heatmap.vue?13e2","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["zrUtil","VisualMapView","graphic","_symbol","createSymbol","layout","helper","PiecewiseVisualMapView","extend","type","doRender","thisGroup","this","group","removeAll","visualMapModel","textGap","get","textStyleModel","textFont","getFont","textFill","getTextColor","itemAlign","_getItemAlign","itemSize","viewData","_getViewData","endsText","showLabel","retrieve","renderItem","item","piece","itemGroup","Group","onclick","bind","_onItemClick","_enableHoverLink","indexInModelPieceList","representValue","getRepresentValue","_createItemSymbol","visualState","getValueState","add","Text","style","x","y","text","textVerticalAlign","textAlign","opacity","_renderEndsText","each","viewPieceList","box","renderBackground","positionGroup","pieceIndex","onHoverLink","method","option","hoverLink","api","dispatchAction","batch","makeHighDownBatch","findTargetDataIndices","on","modelOption","orient","getItemAlign","align","map","getPieceList","index","inverse","reverse","slice","shapeParam","getControllerVisual","selected","clone","newKey","getSelectedMapKey","selectedMode","o","key","from","uid","visualMapId","id","_default","module","exports","echarts","registerAction","event","update","gridModel","axisModel","opt","grid","coordinateSystem","axis","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","position","axisPosition","axisDim","dim","rect","getRect","rectBound","width","height","idx","left","right","top","bottom","onZero","axisOffset","posBound","onZeroCoord","toGlobalCoord","dataToCoord","Math","max","min","rotation","PI","dirMap","labelDirection","tickDirection","nameDirection","labelOffset","labelInside","labelRotate","z2","extendComponentView","render","ecModel","Rect","shape","defaults","fill","getItemStyle","silent","registerPreprocessor","xAxis","yAxis","_config","__DEV__","VisualMapModel","VisualMapping","visualDefault","_number","reformIntervals","PiecewiseModel","defaultOption","minOpen","maxOpen","itemWidth","itemHeight","itemSymbol","pieceList","categories","splitNumber","itemGap","optionUpdated","newOption","isInit","superApply","arguments","_pieceList","resetExtent","mode","_mode","_determineMode","resetMethods","call","_resetSelected","resetVisual","mappingOption","state","mappingMethod","dataExtent","getExtent","visual","completeVisualOption","visualTypesInPieces","visualTypes","listVisualTypes","isCategory","has","obj","visualType","isObject","hasOwnProperty","pieces","v","exists","stateList","target","prototype","apply","thisOption","hasSel","value","length","setSelected","findPieceIndex","result","eachTargetSeries","seriesModel","dataIndices","data","getData","getDataDimension","dataIndex","pIdx","push","seriesId","pieceInterval","interval","Infinity","getVisualMeta","getColorVisual","stops","outerColors","edge","unshift","curr","setStop","valueState","color","precision","parseInt","splitStep","toFixed","close","formatValueText","cate","normalizeReverse","pieceListItem","label","closeList","infinityList","useMinMax","lg","names","i","retrieveVisuals","edgeSymbols","zrColor","eventUtil","domUtil","env","formatUtil","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","vendorPrefix","join","assembleFont","cssText","fontSize","round","name","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","getModel","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","document","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipContent","container","wxa","el","createElement","domBelongToZr","_zr","getZr","_appendToBody","_styleCoord","getWidth","getHeight","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","constructor","stl","currentStyle","defaultView","getComputedStyle","domStyle","show","styleCoord","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","moveTo","hide","time","setTimeout","isShow","dispose","parentNode","removeChild","getOuterSize","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","modelUtil","finder","point","seriesIndex","getSeriesByIndex","queryDataIndex","isArray","getItemGraphicEl","coordSys","getTooltipPosition","dataToPoint","getValues","dimensions","mapDimension","getBoundingRect","applyTransform","transform","_model","makeInner","inner","register","node","records","initGlobalListeners","record","useHandler","eventType","cb","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","payload","pendingList","unregister","features","ctor","preprocessor","hasKeys","createVisualMappings","supplementVisualOption","visualMappings","mappings","createMappings","visualData","isValidType","__hidden","__alphaForOpacity","Creater","replaceVisualOption","keys","applyVisual","scope","dimension","visualTypesMap","getVisual","getItemVisual","setVisual","setItemVisual","eachItem","valueOrIndex","rawDataItem","getRawDataItem","visualMap","len","prepareVisualTypes","incrementalApplyVisual","progress","params","getDimension","next","_util","createHashMap","registerProcessor","getTargetSeries","seriesModelMap","eachComponent","dataZoomModel","eachTargetAxis","dimNames","axisIndex","axisProxy","getAxisProxy","getTargetSeriesModels","set","modifyOutputEnd","overallReset","reset","filterData","findRepresentativeAxisProxy","percentRange","getDataPercentWindow","valueRange","getDataValueWindow","setCalculatedRange","start","end","startValue","endValue","numberUtil","DEFAULT_BAR_BOUND","ContinuousModel","calculable","range","realtime","hoverLinkDataSize","hoverLinkOnHandle","_resetRange","resetItemSize","_orient","isNaN","auto","symbolSize","controller","getSelected","dataInterval","asc","oVals","getColorStopValues","iVals","iIdx","oIdx","iLen","oLen","first","stopsLen","count","step","stopValues","SeriesModel","createListFromArray","CoordinateSystem","getInitialData","getSource","generateCoord","preventIncremental","coordSysCreator","zlevel","z","geoIndex","blurSize","pointSize","maxOpacity","minOpacity","AxisProxy","eachAxisDim","DataZoomModel","extendComponentModel","dependencies","xAxisIndex","yAxisIndex","filterMode","throttle","minSpan","maxSpan","minValueSpan","maxValueSpan","rangeMode","init","parentModel","_dataIntervalByAxis","_dataInfo","_axisProxies","_autoThrottle","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","mergeDefaultAndTheme","doInit","mergeOption","merge","_setDefaultThrottle","updateRangeUse","_resetTarget","_giveAxisProxies","axisProxies","dependentModels","__dzAxisProxy","autoMode","_judgeAutoMode","axisIndexName","normalizeToArray","_autoSetAxisIndex","_autoSetOrient","hasIndexSpecified","autoAxisIndex","dimName","singleAxis","singleAxisModel","singleAxisIndex","componentIndex","axisIndices","axisModels","eachSeries","_isSeriesHasAllAxesTypeOf","axisId","queryComponents","mainType","indexOf","axisType","is","seriesAxisIndex","globalOption","animation","animationDurationUpdate","getFirstTargetAxisModel","firstAxisModel","indices","callback","context","getAxisModel","setRawRange","getPercentRange","getValueRange","axisDimName","hostedBy","getRangePropMode","ret","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","LinearGradient","eventTool","sliderMove","linearMap","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","_shapes","_dataInterval","_handleEnds","_useHandle","_hoverLinkDataIndices","_dragging","_hovering","_buildView","_resetInterval","_renderBar","dataRangeText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","barGroup","_applyTransform","targetGroup","shapes","useHandle","_createBarGroup","outOfRange","createPolygon","inRange","getCursor","_dragHandle","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","createHandlePoints","handleLabel","draggable","drift","stop","ondragend","handleLabelPoint","indicator","attr","invisible","indicatorLabel","indicatorLabelPoint","isEnd","dx","dy","vertex","_updateInterval","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","setStyle","barColor","setShape","barPoints","_updateHandle","forceState","opts","convertOpacityToAlpha","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","handlesColor","sampleNumber","offset","currValue","scale","textPoint","getTransform","_showIndicator","cursorValue","textValue","rangeSymbol","halfHoverLinkSize","pos","createIndicatorPoints","offsetX","offsetY","_hoverLinkFromSeriesMouseOver","_hideIndicator","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","oldBatch","newBatch","resultBatches","compressBatches","_dispatchHighDown","dataModel","isTargetSeries","dataType","off","element","global","remove","points","cursor","Polygon","isRange","extentMax","TooltipRichContent","findPointFromSeries","layoutUtil","Model","globalListener","axisHelper","axisPointerViewHelper","getTooltipRenderMode","parsePercent","proxyRect","tooltipContent","getComponent","renderMode","_renderMode","getDom","_newLine","_tooltipContent","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_ticket","dataByCoordSys","tooltip","tooltipOption","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","getItemModel","model","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","axisValue","seriesDefaultHTML","valueLabel","getValueLabel","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","getAxisRawValue","axisValueLabel","html","seriesTooltip","formatTooltip","newMarkers","firstLine","encodeHTML","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","tooltipTrigger","defaultHtml","asyncTicket","getRawIndex","tooltipOpt","formatter","subTooltipModel","formatTpl","cbTicket","viewWidth","viewHeight","contentSize","vAlign","viewSize","layoutRect","getLayoutRect","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","pop","isInstance","gapH","gapV","size","domWidth","domHeight","gap","rectWidth","rectHeight","HeatmapLayer","getIsInPiecewiseRange","dataSpan","lastIndex","getIsInContinuousRange","isGeoCoordSys","extendChartView","visualMapOfThisSeries","targetSeries","_incrementalDisplayable","_renderOnCartesianAndCalendar","_renderOnGeo","incrementalPrepareRender","incrementalRender","incremental","getAxis","getBandWidth","itemStyleQuery","hoverItemStyleQuery","labelQuery","hoverLabelQuery","hoverStl","labelModel","hoverLabelModel","coordSysType","dataDims","floor","ceil","dataToRect","contentShape","itemModel","hasItemOption","rawValue","getRawValue","defaultText","setLabelStyle","labelFetcher","labelDataIndex","isRectText","setHoverStyle","useHoverLayer","setItemGraphicEl","geo","inRangeVisuals","targetVisuals","outOfRangeVisuals","hmLayer","_hmLayer","getViewRect","roamTransform","getRoamTransform","x2","y2","dims","mapArray","lng","lat","pt","isInRange","getNormalizer","getColorMapper","img","Image","image","canvas","AxisPointerModel","snap","triggerTooltip","status","link","lineStyle","shadowStyle","margin","borderColor","borderWidth","shadowBlur","shadowColor","handle","icon","shadowOffsetX","shadowOffsetY","ComponentModel","axisModelCreator","axisModelCommonMixin","AxisModel","resetRange","restoreData","getCoordSysModel","gridIndex","gridId","getAxisType","extraOption","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","makeElOption","elOption","axisPointerModel","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","elStyle","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","layoutInfo","buildCartesianSingleLabelElOption","getHandleTransform","labelMargin","getTransformedPosition","updateHandleTransform","axisExtent","dimIndex","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","verticalAlign","line","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","span","makeRectShape","registerAxisPointerClass","DataZoomView","lang","featureManager","saveAsImageLang","toolbox","saveAsImage","SaveAsImage","title","connectedBackgroundColor","excludeComponents","pixelRatio","unusable","proto","isSvg","getType","url","getConnectedDataURL","MouseEvent","browser","ie","navigator","msSaveOrOpenBlob","bstr","atob","split","n","u8arr","Uint8Array","charCodeAt","blob","Blob","tab","open","write","$a","download","href","evt","view","bubbles","cancelable","dispatchEvent","AXIS_DIMS","COORDS","isCoordSupported","coordType","createNameEach","attrs","capitalNames","capitalFirst","capitalAttrs","nameObj","capital","createLinkedNodesFinder","forEachNode","forEachEdgeType","edgeIdGetter","sourceNode","existsLink","nodes","edgeType","absorb","processSingleNode","isNodeAbsorded","isLinked","hasLink","edgeId","rectCoordAxisBuildSplitArea","axisView","axisGroup","isBlank","splitAreaModel","areaStyleModel","areaColors","gridRect","ticksCoords","getTicksCoords","tickModel","clamp","areaColorsLen","lastSplitAreaColors","__splitAreaColors","newSplitAreaColors","colorIndex","cIndex","tickValue","prev","coord","areaStyle","getAreaStyle","tickCoord","isHorizontal","anid","rectCoordAxisHandleRemove","_layout","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","_dataStackHelper","getStackedDimension","isAxisUsedInTheGrid","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","otherAxes","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","updateAxisTransform","coordBase","axisExtentSum","toLocalCoord","axisPointerEnabled","_rect","_updateScale","resize","ignoreContainLabel","getBoxLayoutParams","axesList","adjustAxes","extent","setExtent","labelUnionRect","axesMapOnDim","getAxes","coordList","getCartesians","convertToPixel","_findConvertTarget","cartesian","convertFromPixel","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","containPoint","axisPositionUsed","axesCount","createAxisCreator","onBand","addAxis","unionExtent","unionExtentFromData","isCartesian2D","axesModels","findAxesModels","getTooltipAxes","baseAxes","baseAxis","getBaseAxis","otherAxis","axesTypes","create","grids","CATEGORY_DEFAULT_VISUAL_INDEX","_normalizeData","normalizers","visualHandler","visualHandlers","_doMap","normalizeVisualRange","preprocessForPiecewise","preprocessForSpecifiedCategory","assert","mapValueToVisual","normalized","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","fastLerp","parsedVisual","stringify","linear","category","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","modifyHSL","colorSaturation","colorLightness","colorAlpha","modifyAlpha","makeDoMap","liftZ","symbol","getter","setter","symbolCfg","isString","doMapToArray","hasSpecialVisual","originIndex","categoryMap","visualArr","setVisualToOption","doNotNeedPair","applyValue","loop","sourceExtent","parse","noop","littleThan","a","b","addVisualHandler","eachVisual","mapVisual","isPrimary","newVisual","newVal","hasVisual","h","types","sort","type1","type2","dependsOn","visualType1","visualType2","findClosestWhenOutside","possibleI","abs","pieceValue","updatePossible","newAbs","active","inactive","axisPointerModelHelper","_axisPointer","axisPointerClass","fixValue","updateAxisPointer","force","axisPointer","disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","getAxisPointerModel","axisPointerClazz","clazz","Component","registerSubTypeDefaulter","ATTR","newSnapshot","store","giveStore","batchItem","dataZoomId","snapshot","subType","head","clear","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","axisLine","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","splitLine","splitArea","axisDefault","categoryAxis","boundaryGap","deduplication","alignWithLabel","valueAxis","minorTick","minorSplitLine","timeAxis","logAxis","logBase","autoPositionValues","stroke","lineWidth","targetValue","visualCluster","visualObj","defaultColor","controllerVisuals","visualMapping","positionElement","dataViewLang","dataView","BLOCK_SPLITER","Array","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","other","assembleSeriesWithCategoryAxis","tables","valueAxisDim","headers","concat","columns","getCategories","getRawData","lines","items","assembleOtherSeries","vals","argLen","getName","getContentFromModel","filter","str","replace","trim","isTSVFormat","block","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","_dom","tryMergeDataOption","newData","originalData","original","readOnly","optionToContent","contentToOption","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","root","viewMain","textarea","htmlOrDom","getOption","isDom","buttonContainer","buttonStyle","closeButton","refreshButton","addEventListener","Error","newSeriesOptList","seriesOpt","getSeriesByName","layoutBox","componentModel","boxLayoutParams","viewportSize","makeBackground","r","BrushController","BrushTargetManager","history","dataZoomLang","dataZoom","DATA_ZOOM_ID_BASE","DataZoom","_brushController","_onBrush","mount","_isZoomActive","zoom","back","featureModel","updateZoomBtnStatus","updateBackBtnStatus","handlers","unmount","nextActive","dataZoomSelectActive","_dispatchZoomAction","retrieveAxisSetting","setting","setIconStatus","zoomActive","brushTargetManager","include","setPanels","makePanelOpts","targetInfo","xAxisDeclared","yAxisDeclared","enableBrush","brushType","brushStyle","areas","updateCovers","matchOutputRanges","area","coordRange","setBatch","lineX","lineY","minMax","findDataZoom","minMaxSpan","getMinMaxSpan","found","dzModel","dataZoomOpts","toolboxOpt","feature","dataZoomOpt","addForAxis","axisName","axisIndicesName","givenAxisIndices","forEachComponent","axisOpt","newOpt","$fromToolbox","ComponentView","getTargetCoordInfo","coordSysLists","save","coordModel","coordIndex","markerRich","prefix","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","textPadding","bounding","ToolboxModel","layoutMode","ignoreSize","featureOpt","featureName","Feature","borderRadius","showTitle","iconStyle","emphasis","containLabel","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","inputPositionParams","themeModel","getTheme","getDefaultOption","__ordinalMeta","createByAxisModel","rawData","getOrdinalMeta","mergeAll","linkedNodesFinder","effectedModels","query","take","resourceKey","userKey","getStore","release","uKey","isTaken","showContent","trigger","alwaysShowContent","displayMode","confine","showDelay","hideDelay","extraCssText","animationEasingUpdate","crossStyle","textStyle","visualSolution","VISUAL_PRIORITY","PRIORITY","VISUAL","COMPONENT","resultVisual","mapping","registerVisual","createOnAllSeries","resetDefines","pipelineContext","large","visualMetaList","visualMeta","concreteDim","dimInfo","getDimensionInfo","_vm","_h","$createElement","_c","_self","ref","initOptions","options","staticRenderFns","Heatmap","dom","rangeMin","hours","rangeMax","markPoint","itemStyle","default","component","splitList","brushHelper","COORD_CONVERTS","INCLUDE_FINDER_MAIN_TYPES","targetInfoList","_targetInfoList","info","foundCpts","parseFinder","targetInfoBuilders","builder","formatMinMax","includeMainTypes","setOutputRanges","coordRanges","coordConvert","__rangeOffset","diffProcessor","values","xyMinMax","findTargetInfo","coordSyses","setInputRanges","panelId","rangeOffset","getScales","getDefaultBrushType","getPanelRect","defaultBrushType","clipPath","makeRectPanelClipPath","isTargetByCursor","makeRectIsTargetByCursor","coordSysModel","getLinearBrushOtherExtent","makeLinearBrushOtherExtent","controlSeries","areaPanelId","targetInfoMatchers","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","cartesians","panelRectBuilder","geoModels","geoModel","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","polygon","p","axisNameIndex","NaN","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","axisTrigger","PROCESSOR","STATISTIC","collect","ecSize","realIndex","paramsSet","reals","fakeValue","layoutInput","rParam","highlightKey","BoundingRect","Cartesian","getAxesByScale","axisX","axisY","contain","containData","reserved","clampData","xScale","yScale","xAxisExtent","yAxisExtent","getArea","xExtent","yExtent","inherits","_dimName","_axisIndex","_valueWindow","_percentWindow","_dataExtent","_minMaxSpan","_dataZoomModel","calculateDataExtent","seriesModels","seriesData","seriesExtent","getApproximateExtent","fixExtentByAxis","getMin","isCategoryAxis","axisDataLen","getMax","setAxisModel","isRestore","percentWindow","valueWindow","getPixelPrecision","useOrigin","setRange","setMinMaxSpan","percentSpan","valueSpan","getOtherAxisModel","coordSysIndexName","foundOtherAxisModel","isCartesian","otherAxisModel","calculateDataWindow","hasPropModeValue","percentExtent","prop","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","dataWindow","restore","filterSelf","leftOut","rightOut","hasValue","thisHasValue","thisLeftOut","thisRightOut","setData","isInWindow","selectRange","setApproximateExtent","axesInfo","seriesInvolved","coordSysMap","collectAxesInfo","collectSeriesInfo","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","coordSysKey","makeKey","axesInfoInCoordSys","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","involveSeries","axisInfo","groupIndex","getLinkGroupIndex","linkGroup","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","getAxisInfo","GRADIENT_LEVELS","createCanvas","_gradientPixels","normalize","colorFunc","brush","_getBrush","gradientInRange","_getGradient","gradientOutOfRange","ctx","getContext","alpha","globalAlpha","drawImage","imageData","getImageData","pixels","pixelLen","diffOpacity","gradientOffset","gradient","putImageData","brushCanvas","_brushCanvas","d","clearRect","beginPath","arc","closePath","gradientPixels","pixelsSingleState","Uint8ClampedArray","dimAxisMapper","_axes","_dimList","scaleType","toLowerCase","_dataCoordConvert","input","dimList","output","magicTypeLang","magicType","INNER_STACK_KEYWORD","MagicType","bar","stack","getIcons","availableIcons","icons","seriesOptGenreator","seriesType","markLine","isStack","radioTypes","newTitle","generateNewSeriesTypes","newSeriesOpt","radio","tiled","currentType","AxisPointerView","actionInfo","textContain","DataDiffer","listComponentHelper","toolboxModel","featureOpts","_features","featureNames","_featureNames","processFeature","execute","eachChild","titleText","__title","hoverStyle","makeFont","needPutOnTop","textPosition","topOffset","newIndex","oldIndex","oldName","isUserFeatureName","createIconPaths","iconName","iconPaths","iconStatus","iconStyleModel","iconStyleEmphasisModel","titles","iconStr","path","createIcon","formatterParams","componentType","$vars","defaultTextPosition","updateView","clazzUtil","throttleUtil","updateProps","animationModel","moveAnimation","props","propsEqual","lastProp","stopAnimation","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","traverse","_group","_lastGraphicKey","_handle","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","useSnap","pointerEl","handleModel","onmousedown","_onHandleDragMove","_onHandleDragEnd","includeStyles","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","payloadInfo","doClear","buildLabel","xy","wh","xDimIndex","enableClassExtend","restoreLang","Restore","resetOption","replacableOptionKeys","dataBound","contentColor","inactiveColor","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","isMinMax","isFunction","list","optDim","listDimensions","isCalculationCoord","base","completeSingle","defa","completeInactive","stateExist","stateAbsent","optExist","optAbsent","completeController","symbolExists","symbolSizeExists","visuals","parseFloat","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","isFinite","diff","dist","coordSysItem","coordSysId","coordSysIndex","coordSysMainType","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","Axis","coordExtent","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","sign","currDistSign","AxisBuilder","_axisSplitHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","getGroup","groupTransition","superCall","_splitLine","splitLineModel","lineStyleModel","lineColors","lineCount","p1","p2","getLineStyle","Line","x1","y1","_minorSplitLine","minorSplitLineModel","minorTicksCoords","getMinorTicksCoords","k","_splitArea","_cursorHelper","graphicUtil","normalizeRect","localPoints","clipPointsByRect","specifiedXYIndex","xyIndex","brushWidth","targetModel","localCursorPoint","isRadianAroundZero","remRadian","matrixUtil","_vector","v2ApplyTransform","shouldShowAllLabels","dumbGroup","updateTransform","_transform","_dumbGroup","hasBuilder","builders","matrix","pt1","pt2","lineCap","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","sqrt","cos","sin","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelLayout","axisNameAvailableWidth","gapSignal","isNameLocationCenter","nameRotation","innerTextLayout","endTextLayout","truncateOpt","nameTruncateMaxWidth","truncatedText","truncateText","minChar","textEl","__fullText","__truncatedText","isLabelSilent","setTextStyle","eventData","makeAxisEventDataBase","targetType","decomposeTransform","axisRotation","textRotation","direction","rotationDiff","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","ignore","current","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","createTicks","tickTransform","tickEndCoord","tickLineStyle","aniid","tickEl","minorTickModel","minorTickLineStyle","minorTicksEls","axisLabelShow","labels","getViewLabels","labelRotation","rawCategoryData","labelItem","formattedLabel","rawLabel","itemLabelModel","getShallow","Eventful","interactionMutex","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","transformable","brushMode","removeOnClick","baseUID","_brushType","_brushOption","_panels","_track","_covers","_creatingCover","_creatingPanel","_enableGlobalPan","_uid","_handlers","pointerHandlers","eventName","doEnableBrush","brushOption","mountHandlers","doDisableBrush","unmountHandlers","createCover","cover","coverRenderers","__brushOption","updateZ","endCreating","creatingCover","coverRenderer","getCoverRenderer","updateCoverShape","updateCoverAfterCreation","updateCommon","getPanelByPoint","panel","panels","pn","getPanelByCover","clearCovers","covers","originalLength","shouldShowCover","track","getTrackEnds","tail","createBaseRectCover","doDrift","edgeNames","makeStyle","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection","pointsToRect","clipByPanel","strokeNoScale","formatRectRange","localDirection","inverseMap","transformDirection","driftRect","toRectRange","fromRectRange","rectRange","localDelta","toLocalDelta","namePart","ind","driftPolygon","localD","transformCoordToLocal","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","panelOpts","enableGlobalPan","eachCover","brushOptionList","tmpIdPrefix","oldCovers","newCovers","oldGetKey","getKey","addOrUpdate","newBrushOption","mixin","mousedown","handleDragEnd","mousemove","mouseup","getLineRenderer","localTrack","ends","Polyline","styleModel","buildLabelElOption","labelPos","paddings","font","confineInContainer","bgColor","getLabel","axisDimension","translate","textLayout","makeSectorShape","r0","startAngle","endAngle","clockwise"],"mappings":"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","file":"js/chunk-8c519180.26126fd2.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar layout = require(\"../../util/layout\");\n\nvar helper = require(\"./helper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PiecewiseVisualMapView = VisualMapView.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, renderItem, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n\n    function renderItem(item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            textVerticalAlign: 'middle',\n            textAlign: itemAlign,\n            textFont: textFont,\n            textFill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLink: function (itemGroup, pieceIndex) {\n    itemGroup.on('mouseover', zrUtil.bind(onHoverLink, this, 'highlight')).on('mouseout', zrUtil.bind(onHoverLink, this, 'downplay'));\n\n    function onHoverLink(method) {\n      var visualMapModel = this.visualMapModel;\n      visualMapModel.option.hoverLink && this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _getItemAlign: function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        textVerticalAlign: 'middle',\n        textAlign: showLabel ? itemAlign : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n    group.add(itemGroup);\n  },\n\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n  _getViewData: function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n        endsText = endsText.slice().reverse();\n      }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  },\n\n  /**\n   * @private\n   */\n  _createItemSymbol: function (group, representValue, shapeParam) {\n    group.add(createSymbol(this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], this.getControllerVisual(representValue, 'color')));\n  },\n\n  /**\n   * @private\n   */\n  _onItemClick: function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (option.selectedMode === 'single') {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  }\n});\nvar _default = PiecewiseVisualMapView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar _number = require(\"../../util/number\");\n\nvar reformIntervals = _number.reformIntervals;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PiecewiseModel = VisualMapModel.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * Order Rule:\n   *\n   * option.categories / option.pieces / option.text / option.selected:\n   *     If !option.inverse,\n   *     Order when vertical: ['top', ..., 'bottom'].\n   *     Order when horizontal: ['left', ..., 'right'].\n   *     If option.inverse, the meaning of\n   *     the order should be reversed.\n   *\n   * this._pieceList:\n   *     The order is always [low, ..., high].\n   *\n   * Mapping from location to low-high:\n   *     If !option.inverse\n   *     When vertical, top is high.\n   *     When horizontal, right is high.\n   *     If option.inverse, reverse.\n   */\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    selected: null,\n    // Object. If not specified, means selected.\n    // When pieces and splitNumber: {'0': true, '5': true}\n    // When categories: {'cate1': false, 'cate3': true}\n    // When selected === false, means all unselected.\n    minOpen: false,\n    // Whether include values that smaller than `min`.\n    maxOpen: false,\n    // Whether include values that bigger than `max`.\n    align: 'auto',\n    // 'auto', 'left', 'right'\n    itemWidth: 20,\n    // When put the controller vertically, it is the length of\n    // horizontal side of each item. Otherwise, vertical side.\n    itemHeight: 14,\n    // When put the controller vertically, it is the length of\n    // vertical side of each item. Otherwise, horizontal side.\n    itemSymbol: 'roundRect',\n    pieceList: null,\n    // Each item is Object, with some of those attrs:\n    // {min, max, lt, gt, lte, gte, value,\n    // color, colorSaturation, colorAlpha, opacity,\n    // symbol, symbolSize}, which customize the range or visual\n    // coding of the certain piece. Besides, see \"Order Rule\".\n    categories: null,\n    // category names, like: ['some1', 'some2', 'some3'].\n    // Attr min/max are ignored when categories set. See \"Order Rule\"\n    splitNumber: 5,\n    // If set to 5, auto split five pieces equally.\n    // If set to 0 and component type not set, component type will be\n    // determined as \"continuous\". (It is less reasonable but for ec2\n    // compatibility, see echarts/component/visualMap/typeDefaulter)\n    selectedMode: 'multiple',\n    // Can be 'multiple' or 'single'.\n    itemGap: 10,\n    // The gap between two items, in px.\n    hoverLink: true,\n    // Enable hover highlight.\n    showLabel: null // By default, when text is used, label will hide (the logic\n    // is remained for compatibility reason)\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    PiecewiseModel.superApply(this, 'optionUpdated', arguments);\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     * @private\n     * @type {Array.<Object>}\n     */\n\n    this._pieceList = [];\n    this.resetExtent();\n    /**\n     * 'pieces', 'categories', 'splitNumber'\n     * @type {string}\n     */\n\n    var mode = this._mode = this._determineMode();\n\n    resetMethods[this._mode].call(this);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          var piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = 0;\n      zrUtil.each(this.stateList, function (state) {\n        exists |= has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && (zrUtil.isObject(obj[state]) ? obj[state].hasOwnProperty(visualType) : obj[state] === visualType // e.g., inRange: 'symbol'\n      );\n    }\n\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n  },\n  _resetSelected: function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel ? selected[key] = false : hasSel = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  },\n\n  /**\n   * @public\n   */\n  getSelectedMapKey: function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  },\n\n  /**\n   * @public\n   */\n  getPieceList: function () {\n    return this._pieceList;\n  },\n\n  /**\n   * @private\n   * @return {string}\n   */\n  _determineMode: function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getValueState: function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  },\n\n  /**\n   * @public\n   * @params {number} pieceIndex piece index in visualMapModel.getPieceList()\n   * @return {Array.<Object>} [{seriesId, dataIndex: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (pieceIndex) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, this._pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @private\n   * @param {Object} piece piece.value or piece.interval is required.\n   * @return {number} Can be Infinity or -Infinity\n   */\n  getRepresentValue: function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  },\n  getVisualMeta: function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = [];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      });\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  }\n});\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      pieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      pieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      pieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function () {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME category模式也使用pieceList，但在visualMapping中不是使用pieceList。\n      // 是否改一致。\n      this._pieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, this._pieceList);\n  },\n  pieces: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close[1] = 0);\n\n        if (interval[0] === interval[1] && close[0] && close[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      pieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, pieceList); // Only pieces\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', '≤'][close[1]], ['>', '≥'][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nvar _default = PiecewiseModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0];\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar features = {};\n\nfunction register(name, ctor) {\n  features[name] = ctor;\n}\n\nfunction get(name) {\n  return features[name];\n}\n\nexports.register = register;\nexports.get = get;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/PiecewiseModel\");\n\nrequire(\"./visualMap/PiecewiseView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapping = require(\"./VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name in obj) {\n      if (obj.hasOwnProperty(name)) {\n        return true;\n      }\n    }\n  }\n}\n/**\n * @param {Object} option\n * @param {Array.<string>} stateList\n * @param {Function} [supplementVisualOption]\n * @return {Object} visualMappings <state, <visualType, module:echarts/visual/VisualMapping>>\n */\n\n\nfunction createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\n/**\n * @param {Object} thisOption\n * @param {Object} newOption\n * @param {Array.<string>} keys\n */\n\n\nfunction replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {module:echarts/data/List} list\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {object} [scope] Scope for getValueState\n * @param {string} [dimension] Concrete dimension, if used.\n */\n// ???! handle brush?\n\n\nfunction applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return data.getItemVisual(dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    data.setItemVisual(dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {number} [dim] dimension or dimension index.\n */\n\n\nfunction incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n\n  function progress(params, data) {\n    if (dim != null) {\n      dim = data.getDimension(dim);\n    }\n\n    function getVisual(key) {\n      return data.getItemVisual(dataIndex, key);\n    }\n\n    function setVisual(key, value) {\n      data.setItemVisual(dataIndex, key, value);\n    }\n\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n      if (rawDataItem && rawDataItem.visualMap === false) {\n        continue;\n      }\n\n      var value = dim != null ? data.get(dim, dataIndex, true) : dataIndex;\n      var valueState = getValueState(value);\n      var mappings = visualMappings[valueState];\n      var visualTypes = visualTypesMap[valueState];\n\n      for (var i = 0, len = visualTypes.length; i < len; i++) {\n        var type = visualTypes[i];\n        mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n      }\n    }\n  }\n\n  return {\n    progress: progress\n  };\n}\n\nexports.createVisualMappings = createVisualMappings;\nexports.replaceVisualOption = replaceVisualOption;\nexports.applyVisual = applyVisual;\nexports.incrementalApplyVisual = incrementalApplyVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerProcessor({\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    var seriesModelMap = createHashMap();\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      dataZoomModel.eachTargetAxis(function (dimNames, axisIndex, dataZoomModel) {\n        var axisProxy = dataZoomModel.getAxisProxy(dimNames.name, axisIndex);\n        each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n          seriesModelMap.set(seriesModel.uid, seriesModel);\n        });\n      });\n    });\n    return seriesModelMap;\n  },\n  modifyOutputEnd: true,\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (dimNames, axisIndex, dataZoomModel) {\n        dataZoomModel.getAxisProxy(dimNames.name, axisIndex).reset(dataZoomModel, api);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (dimNames, axisIndex, dataZoomModel) {\n        dataZoomModel.getAxisProxy(dimNames.name, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      var percentRange = axisProxy.getDataPercentWindow();\n      var valueRange = axisProxy.getDataValueWindow();\n      dataZoomModel.setCalculatedRange({\n        start: percentRange[0],\n        end: percentRange[1],\n        startValue: valueRange[0],\n        endValue: valueRange[1]\n      });\n    });\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = VisualMapModel.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    align: 'auto',\n    // 'auto', 'left', 'right', 'top', 'bottom'\n    calculable: false,\n    // This prop effect default component type determine,\n    // See echarts/component/visualMap/typeDefaulter.\n    range: null,\n    // selected range. In default case `range` is [min, max]\n    // and can auto change along with modification of min max,\n    // util use specifid a range.\n    realtime: true,\n    // Whether realtime update.\n    itemHeight: null,\n    // The length of the range control edge.\n    itemWidth: null,\n    // The length of the other side.\n    hoverLink: true,\n    // Enable hover highlight.\n    hoverLinkDataSize: null,\n    // The size of hovered data.\n    hoverLinkOnHandle: null // Whether trigger hoverLink when hover handle.\n    // If not specified, follow the value of `realtime`.\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    ContinuousModel.superApply(this, 'optionUpdated', arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  resetItemSize: function () {\n    ContinuousModel.superApply(this, 'resetItemSize', arguments);\n    var itemSize = this.itemSize;\n    this._orient === 'horizontal' && itemSize.reverse();\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  },\n\n  /**\n   * @private\n   */\n  _resetRange: function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = 0; // For good looking.\n      }\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  },\n\n  /**\n   * @public\n   */\n  getSelected: function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  },\n\n  /**\n   * @override\n   */\n  getValueState: function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  },\n\n  /**\n   * @params {Array.<number>} range target value: range[0] <= value && value <= range[1]\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @implement\n   */\n  getVisualMeta: function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  }\n});\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nvar _default = ContinuousModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.heatmap',\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      generateCoord: 'value'\n    });\n  },\n  preventIncremental: function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  },\n  defaultOption: {\n    // Cartesian2D or geo\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar helper = require(\"./helper\");\n\nvar AxisProxy = require(\"./AxisProxy\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar eachAxisDim = helper.eachAxisDim;\nvar DataZoomModel = echarts.extendComponentModel({\n  type: 'dataZoom',\n  dependencies: ['xAxis', 'yAxis', 'zAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series'],\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    zlevel: 0,\n    z: 4,\n    // Higher than normal component (z: 2).\n    orient: null,\n    // Default auto by axisIndex. Possible value: 'horizontal', 'vertical'.\n    xAxisIndex: null,\n    // Default the first horizontal category axis.\n    yAxisIndex: null,\n    // Default the first vertical category axis.\n    filterMode: 'filter',\n    // Possible values: 'filter' or 'empty' or 'weakFilter'.\n    // 'filter': data items which are out of window will be removed. This option is\n    //          applicable when filtering outliers. For each data item, it will be\n    //          filtered if one of the relevant dimensions is out of the window.\n    // 'weakFilter': data items which are out of window will be removed. This option\n    //          is applicable when filtering outliers. For each data item, it will be\n    //          filtered only if all  of the relevant dimensions are out of the same\n    //          side of the window.\n    // 'empty': data items which are out of window will be set to empty.\n    //          This option is applicable when user should not neglect\n    //          that there are some data items out of window.\n    // 'none': Do not filter.\n    // Taking line chart as an example, line will be broken in\n    // the filtered points when filterModel is set to 'empty', but\n    // be connected when set to 'filter'.\n    throttle: null,\n    // Dispatch action by the fixed rate, avoid frequency.\n    // default 100. Do not throttle when use null/undefined.\n    // If animation === true and animationDurationUpdate > 0,\n    // default value is 100, otherwise 20.\n    start: 0,\n    // Start percent. 0 ~ 100\n    end: 100,\n    // End percent. 0 ~ 100\n    startValue: null,\n    // Start value. If startValue specified, start is ignored.\n    endValue: null,\n    // End value. If endValue specified, end is ignored.\n    minSpan: null,\n    // 0 ~ 100\n    maxSpan: null,\n    // 0 ~ 100\n    minValueSpan: null,\n    // The range of dataZoom can not be smaller than that.\n    maxValueSpan: null,\n    // The range of dataZoom can not be larger than that.\n    rangeMode: null // Array, can be 'value' or 'percent'.\n\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * key like x_0, y_1\n     * @private\n     * @type {Object}\n     */\n    this._dataIntervalByAxis = {};\n    /**\n     * @private\n     */\n\n    this._dataInfo = {};\n    /**\n     * key like x_0, y_1\n     * @private\n     */\n\n    this._axisProxies = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * @private\n     */\n\n    this._autoThrottle = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     *\n     * @private\n     */\n\n    this._rangePropMode = ['percent', 'percent'];\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     *\n     * @readOnly\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this.doInit(inputRawOption);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    zrUtil.merge(this.option, newOption, true);\n    zrUtil.merge(this.settledOption, inputRawOption, true);\n    this.doInit(inputRawOption);\n  },\n\n  /**\n   * @protected\n   */\n  doInit: function (inputRawOption) {\n    var thisOption = this.option; // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    this._setDefaultThrottle(inputRawOption);\n\n    updateRangeUse(this, inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n    this.textStyleModel = this.getModel('textStyle');\n\n    this._resetTarget();\n\n    this._giveAxisProxies();\n  },\n\n  /**\n   * @private\n   */\n  _giveAxisProxies: function () {\n    var axisProxies = this._axisProxies;\n    this.eachTargetAxis(function (dimNames, axisIndex, dataZoomModel, ecModel) {\n      var axisModel = this.dependentModels[dimNames.axis][axisIndex]; // If exists, share axisProxy with other dataZoomModels.\n\n      var axisProxy = axisModel.__dzAxisProxy || ( // Use the first dataZoomModel as the main model of axisProxy.\n      axisModel.__dzAxisProxy = new AxisProxy(dimNames.name, axisIndex, this, ecModel)); // FIXME\n      // dispose __dzAxisProxy\n\n      axisProxies[dimNames.name + '_' + axisIndex] = axisProxy;\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _resetTarget: function () {\n    var thisOption = this.option;\n\n    var autoMode = this._judgeAutoMode();\n\n    eachAxisDim(function (dimNames) {\n      var axisIndexName = dimNames.axisIndex;\n      thisOption[axisIndexName] = modelUtil.normalizeToArray(thisOption[axisIndexName]);\n    }, this);\n\n    if (autoMode === 'axisIndex') {\n      this._autoSetAxisIndex();\n    } else if (autoMode === 'orient') {\n      this._autoSetOrient();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _judgeAutoMode: function () {\n    // Auto set only works for setOption at the first time.\n    // The following is user's reponsibility. So using merged\n    // option is OK.\n    var thisOption = this.option;\n    var hasIndexSpecified = false;\n    eachAxisDim(function (dimNames) {\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n      if (thisOption[dimNames.axisIndex] != null) {\n        hasIndexSpecified = true;\n      }\n    }, this);\n    var orient = thisOption.orient;\n\n    if (orient == null && hasIndexSpecified) {\n      return 'orient';\n    } else if (!hasIndexSpecified) {\n      if (orient == null) {\n        thisOption.orient = 'horizontal';\n      }\n\n      return 'axisIndex';\n    }\n  },\n\n  /**\n   * @private\n   */\n  _autoSetAxisIndex: function () {\n    var autoAxisIndex = true;\n    var orient = this.get('orient', true);\n    var thisOption = this.option;\n    var dependentModels = this.dependentModels;\n\n    if (autoAxisIndex) {\n      // Find axis that parallel to dataZoom as default.\n      var dimName = orient === 'vertical' ? 'y' : 'x';\n\n      if (dependentModels[dimName + 'Axis'].length) {\n        thisOption[dimName + 'AxisIndex'] = [0];\n        autoAxisIndex = false;\n      } else {\n        each(dependentModels.singleAxis, function (singleAxisModel) {\n          if (autoAxisIndex && singleAxisModel.get('orient', true) === orient) {\n            thisOption.singleAxisIndex = [singleAxisModel.componentIndex];\n            autoAxisIndex = false;\n          }\n        });\n      }\n    }\n\n    if (autoAxisIndex) {\n      // Find the first category axis as default. (consider polar)\n      eachAxisDim(function (dimNames) {\n        if (!autoAxisIndex) {\n          return;\n        }\n\n        var axisIndices = [];\n        var axisModels = this.dependentModels[dimNames.axis];\n\n        if (axisModels.length && !axisIndices.length) {\n          for (var i = 0, len = axisModels.length; i < len; i++) {\n            if (axisModels[i].get('type') === 'category') {\n              axisIndices.push(i);\n            }\n          }\n        }\n\n        thisOption[dimNames.axisIndex] = axisIndices;\n\n        if (axisIndices.length) {\n          autoAxisIndex = false;\n        }\n      }, this);\n    }\n\n    if (autoAxisIndex) {\n      // FIXME\n      // 这里是兼容ec2的写法（没指定xAxisIndex和yAxisIndex时把scatter和双数值轴折柱纳入dataZoom控制），\n      // 但是实际是否需要Grid.js#getScaleByOption来判断（考虑time，log等axis type）？\n      // If both dataZoom.xAxisIndex and dataZoom.yAxisIndex is not specified,\n      // dataZoom component auto adopts series that reference to\n      // both xAxis and yAxis which type is 'value'.\n      this.ecModel.eachSeries(function (seriesModel) {\n        if (this._isSeriesHasAllAxesTypeOf(seriesModel, 'value')) {\n          eachAxisDim(function (dimNames) {\n            var axisIndices = thisOption[dimNames.axisIndex];\n            var axisIndex = seriesModel.get(dimNames.axisIndex);\n            var axisId = seriesModel.get(dimNames.axisId);\n            var axisModel = seriesModel.ecModel.queryComponents({\n              mainType: dimNames.axis,\n              index: axisIndex,\n              id: axisId\n            })[0];\n            axisIndex = axisModel.componentIndex;\n\n            if (zrUtil.indexOf(axisIndices, axisIndex) < 0) {\n              axisIndices.push(axisIndex);\n            }\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _autoSetOrient: function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (dimNames) {\n      !dim && (dim = dimNames.name);\n    }, this);\n    this.option.orient = dim === 'y' ? 'vertical' : 'horizontal';\n  },\n\n  /**\n   * @private\n   */\n  _isSeriesHasAllAxesTypeOf: function (seriesModel, axisType) {\n    // FIXME\n    // 需要series的xAxisIndex和yAxisIndex都首先自动设置上。\n    // 例如series.type === scatter时。\n    var is = true;\n    eachAxisDim(function (dimNames) {\n      var seriesAxisIndex = seriesModel.get(dimNames.axisIndex);\n      var axisModel = this.dependentModels[dimNames.axis][seriesAxisIndex];\n\n      if (!axisModel || axisModel.get('type') !== axisType) {\n        is = false;\n      }\n    }, this);\n    return is;\n  },\n\n  /**\n   * @private\n   */\n  _setDefaultThrottle: function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  },\n\n  /**\n   * @public\n   */\n  getFirstTargetAxisModel: function () {\n    var firstAxisModel;\n    eachAxisDim(function (dimNames) {\n      if (firstAxisModel == null) {\n        var indices = this.get(dimNames.axisIndex);\n\n        if (indices.length) {\n          firstAxisModel = this.dependentModels[dimNames.axis][indices[0]];\n        }\n      }\n    }, this);\n    return firstAxisModel;\n  },\n\n  /**\n   * @public\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n  eachTargetAxis: function (callback, context) {\n    var ecModel = this.ecModel;\n    eachAxisDim(function (dimNames) {\n      each(this.get(dimNames.axisIndex), function (axisIndex) {\n        callback.call(context, dimNames, axisIndex, this, ecModel);\n      }, this);\n    }, this);\n  },\n\n  /**\n   * @param {string} dimName\n   * @param {number} axisIndex\n   * @return {module:echarts/component/dataZoom/AxisProxy} If not found, return null/undefined.\n   */\n  getAxisProxy: function (dimName, axisIndex) {\n    return this._axisProxies[dimName + '_' + axisIndex];\n  },\n\n  /**\n   * @param {string} dimName\n   * @param {number} axisIndex\n   * @return {module:echarts/model/Model} If not found, return null/undefined.\n   */\n  getAxisModel: function (dimName, axisIndex) {\n    var axisProxy = this.getAxisProxy(dimName, axisIndex);\n    return axisProxy && axisProxy.getAxisModel();\n  },\n\n  /**\n   * If not specified, set to undefined.\n   *\n   * @public\n   * @param {Object} opt\n   * @param {number} [opt.start]\n   * @param {number} [opt.end]\n   * @param {number} [opt.startValue]\n   * @param {number} [opt.endValue]\n   */\n  setRawRange: function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    updateRangeUse(this, opt);\n  },\n\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {number} [opt.start]\n   * @param {number} [opt.end]\n   * @param {number} [opt.startValue]\n   * @param {number} [opt.endValue]\n   */\n  setCalculatedRange: function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  },\n\n  /**\n   * @public\n   * @return {Array.<number>} [startPercent, endPercent]\n   */\n  getPercentRange: function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  },\n\n  /**\n   * @public\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @param {string} [axisDimName]\n   * @param {number} [axisIndex]\n   * @return {Array.<number>} [startValue, endValue] value can only be '-' or finite number.\n   */\n  getValueRange: function (axisDimName, axisIndex) {\n    if (axisDimName == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDimName, axisIndex).getDataValueWindow();\n    }\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/model/Model} [axisModel] If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   * @return {module:echarts/component/dataZoom/AxisProxy}\n   */\n  findRepresentativeAxisProxy: function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var axisProxies = this._axisProxies;\n\n    for (var key in axisProxies) {\n      if (axisProxies.hasOwnProperty(key) && axisProxies[key].hostedBy(this)) {\n        return axisProxies[key];\n      }\n    } // If no hosted axis find not hosted axisProxy.\n    // Consider this case: dataZoomModel1 and dataZoomModel2 control the same axis,\n    // and the option.start or option.end settings are different. The percentRange\n    // should follow axisProxy.\n    // (We encounter this problem in toolbox data zoom.)\n\n\n    for (var key in axisProxies) {\n      if (axisProxies.hasOwnProperty(key) && !axisProxies[key].hostedBy(this)) {\n        return axisProxies[key];\n      }\n    }\n  },\n\n  /**\n   * @return {Array.<string>}\n   */\n  getRangePropMode: function () {\n    return this._rangePropMode.slice();\n  }\n});\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nfunction updateRangeUse(dataZoomModel, inputRawOption) {\n  var rangePropMode = dataZoomModel._rangePropMode;\n  var rangeModeInOption = dataZoomModel.get('rangeMode');\n  each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n    var percentSpecified = inputRawOption[names[0]] != null;\n    var valueSpecified = inputRawOption[names[1]] != null;\n\n    if (percentSpecified && !valueSpecified) {\n      rangePropMode[index] = 'percent';\n    } else if (!percentSpecified && valueSpecified) {\n      rangePropMode[index] = 'value';\n    } else if (rangeModeInOption) {\n      rangePropMode[index] = rangeModeInOption[index];\n    } else if (percentSpecified) {\n      // percentSpecified && valueSpecified\n      rangePropMode[index] = 'percent';\n    } // else remain its original setting.\n\n  });\n}\n\nvar _default = DataZoomModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar helper = require(\"./helper\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = VisualMapView.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @override\n   */\n  init: function () {\n    ContinuousView.superApply(this, 'init', arguments);\n    /**\n     * @private\n     */\n\n    this._shapes = {};\n    /**\n     * @private\n     */\n\n    this._dataInterval = [];\n    /**\n     * @private\n     */\n\n    this._handleEnds = [];\n    /**\n     * @private\n     */\n\n    this._orient;\n    /**\n     * @private\n     */\n\n    this._useHandle;\n    /**\n     * @private\n     */\n\n    this._hoverLinkDataIndices = [];\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._hovering;\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _buildView: function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.barGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        textVerticalAlign: orient === 'horizontal' ? 'middle' : align,\n        textAlign: orient === 'horizontal' ? align : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderBar: function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var barGroup = shapes.barGroup = this._createBarGroup(itemAlign); // Bar\n\n\n    barGroup.add(shapes.outOfRange = createPolygon());\n    barGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    var textRect = visualMapModel.textStyleModel.getTextRect('国');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(barGroup, 0, itemSize, textSize, orient, itemAlign);\n\n      this._createHandle(barGroup, 1, itemSize, textSize, orient, itemAlign);\n    }\n\n    this._createIndicator(barGroup, itemSize, textSize, orient);\n\n    targetGroup.add(barGroup);\n  },\n\n  /**\n   * @private\n   */\n  _createHandle: function (barGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleThumb = createPolygon(createHandlePoints(handleIndex, textSize), getCursor(this._orient), onDrift, onDragEnd);\n    handleThumb.position[0] = itemSize[0];\n    barGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(handleLabel);\n    var handleLabelPoint = [orient === 'horizontal' ? textSize / 2 : textSize * 1.5, orient === 'horizontal' ? handleIndex === 0 ? -(textSize * 1.5) : textSize * 1.5 : handleIndex === 0 ? -textSize / 2 : textSize / 2];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  },\n\n  /**\n   * @private\n   */\n  _createIndicator: function (barGroup, itemSize, textSize, orient) {\n    var indicator = createPolygon([[0, 0]], 'move');\n    indicator.position[0] = itemSize[0];\n    indicator.attr({\n      invisible: true,\n      silent: true\n    });\n    barGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT + 3, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n  },\n\n  /**\n   * @private\n   */\n  _dragHandle: function (handleIndex, isEnd, dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.barGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  _updateInterval: function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor,\n      opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor,\n      opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  },\n\n  /**\n   * @private\n   */\n  _createBarVisual: function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  },\n\n  /**\n   * @private\n   */\n  _makeColorGradient: function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  },\n\n  /**\n   * @private\n   */\n  _createBarPoints: function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  },\n\n  /**\n   * @private\n   */\n  _createBarGroup: function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scale: itemAlign === 'bottom' ? [1, 1] : [-1, 1],\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scale: itemAlign === 'bottom' ? [-1, 1] : [1, 1],\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scale: itemAlign === 'left' ? [1, -1] : [-1, -1]\n    } : {\n      scale: itemAlign === 'left' ? [1, 1] : [-1, 1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _updateHandle: function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.position[1] = handleEnds[handleIndex]; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        textVerticalAlign: 'middle',\n        textAlign: this._applyTransform(this._orient === 'horizontal' ? handleIndex === 0 ? 'bottom' : 'top' : 'left', shapes.barGroup)\n      });\n    }, this);\n  },\n\n  /**\n   * @private\n   * @param {number} cursorValue\n   * @param {number} textValue\n   * @param {string} [rangeSymbol]\n   * @param {number} [halfHoverLinkSize]\n   */\n  _showIndicator: function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var pos = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.position[1] = pos;\n    indicator.attr('invisible', false);\n    indicator.setShape('points', createIndicatorPoints(!!rangeSymbol, halfHoverLinkSize, pos, itemSize[1]));\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    indicator.setStyle('fill', color); // Update handle label position.\n\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.barGroup);\n\n    var orient = this._orient;\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      textVerticalAlign: orient === 'horizontal' ? align : 'middle',\n      textAlign: orient === 'horizontal' ? 'center' : align,\n      x: textPoint[0],\n      y: textPoint[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkToSeries: function () {\n    var self = this;\n\n    this._shapes.barGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.barGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkFromSeries: function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doHoverLinkToSeries: function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, '≈ ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  },\n\n  /**\n   * @private\n   */\n  _hoverLinkFromSeriesMouseOver: function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || el.dataIndex == null) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(el.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(el.dataType);\n    var value = data.get(visualMapModel.getDataDimension(data), el.dataIndex, true);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _hideIndicator: function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkToSeries: function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkFromSeries: function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  },\n\n  /**\n   * @private\n   */\n  _applyTransform: function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return graphic[zrUtil.isArray(vertex) ? 'applyTransform' : 'transformDirection'](vertex, transform, inverse);\n  },\n\n  /**\n   * @private\n   */\n  _dispatchHighDown: function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  }\n});\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction createHandlePoints(handleIndex, textSize) {\n  return handleIndex === 0 ? [[0, 0], [textSize, 0], [textSize, -textSize]] : [[0, 0], [textSize, 0], [textSize, textSize]];\n}\n\nfunction createIndicatorPoints(isRange, halfHoverLinkSize, pos, extentMax) {\n  return isRange ? [// indicate range\n  [0, -mathMin(halfHoverLinkSize, mathMax(pos, 0))], [HOVER_LINK_OUT, 0], [0, mathMin(halfHoverLinkSize, mathMax(extentMax - pos, 0))]] : [// indicate single value\n  [0, 0], [5, -5], [5, 5]];\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = ContinuousView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar DataZoomModel = require(\"./DataZoomModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = DataZoomModel.extend({\n  type: 'dataZoom.select'\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar HeatmapLayer = require(\"./HeatmapLayer\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    // Try to find in the location of the last found\n    for (var i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n\n    if (i === len) {\n      // Not found, back interation\n      for (var i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n\n    return i >= 0 && i < len && selected[i];\n  };\n}\n\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\n\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions; // Not use coorSys.type === 'geo' because coordSys maybe extended\n\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\n\nvar _default = echarts.extendChartView({\n  type: 'heatmap',\n  render: function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n    this.group.removeAll();\n    this._incrementalDisplayable = null;\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  },\n  incrementalRender: function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys) {\n      this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n    }\n  },\n  _renderOnCartesianAndCalendar: function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var width;\n    var height;\n\n    if (coordSys.type === 'cartesian2d') {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      width = xAxis.getBandWidth();\n      height = yAxis.getBandWidth();\n    }\n\n    var group = this.group;\n    var data = seriesModel.getData();\n    var itemStyleQuery = 'itemStyle';\n    var hoverItemStyleQuery = 'emphasis.itemStyle';\n    var labelQuery = 'label';\n    var hoverLabelQuery = 'emphasis.label';\n    var style = seriesModel.getModel(itemStyleQuery).getItemStyle(['color']);\n    var hoverStl = seriesModel.getModel(hoverItemStyleQuery).getItemStyle();\n    var labelModel = seriesModel.getModel(labelQuery);\n    var hoverLabelModel = seriesModel.getModel(hoverLabelQuery);\n    var coordSysType = coordSys.type;\n    var dataDims = coordSysType === 'cartesian2d' ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n\n    for (var idx = start; idx < end; idx++) {\n      var rect;\n\n      if (coordSysType === 'cartesian2d') {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[2], idx))) {\n          continue;\n        }\n\n        var point = coordSys.dataToPoint([data.get(dataDims[0], idx), data.get(dataDims[1], idx)]);\n        rect = new graphic.Rect({\n          shape: {\n            x: Math.floor(Math.round(point[0]) - width / 2),\n            y: Math.floor(Math.round(point[1]) - height / 2),\n            width: Math.ceil(width),\n            height: Math.ceil(height)\n          },\n          style: {\n            fill: data.getItemVisual(idx, 'color'),\n            opacity: data.getItemVisual(idx, 'opacity')\n          }\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: {\n            fill: data.getItemVisual(idx, 'color'),\n            opacity: data.getItemVisual(idx, 'opacity')\n          }\n        });\n      }\n\n      var itemModel = data.getItemModel(idx); // Optimization for large datset\n\n      if (data.hasItemOption) {\n        style = itemModel.getModel(itemStyleQuery).getItemStyle(['color']);\n        hoverStl = itemModel.getModel(hoverItemStyleQuery).getItemStyle();\n        labelModel = itemModel.getModel(labelQuery);\n        hoverLabelModel = itemModel.getModel(hoverLabelQuery);\n      }\n\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2];\n      }\n\n      graphic.setLabelStyle(style, hoverStl, labelModel, hoverLabelModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultText: defaultText,\n        isRectText: true\n      });\n      rect.setStyle(style);\n      graphic.setHoverStyle(rect, data.hasItemOption ? hoverStl : zrUtil.extend({}, hoverStl));\n      rect.incremental = incremental; // PENDING\n\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.useHoverLayer = true;\n      }\n\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n    }\n  },\n  _renderOnGeo: function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform); // Clamp on viewport\n\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar DataZoomView = require(\"./DataZoomView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = DataZoomView.extend({\n  type: 'dataZoom.select'\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Uint8Array */\nvar saveAsImageLang = lang.toolbox.saveAsImage;\n\nfunction SaveAsImage(model) {\n  this.model = model;\n}\n\nSaveAsImage.defaultOption = {\n  show: true,\n  icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n  title: saveAsImageLang.title,\n  type: 'png',\n  // Default use option.backgroundColor\n  // backgroundColor: '#fff',\n  connectedBackgroundColor: '#fff',\n  name: '',\n  excludeComponents: ['toolbox'],\n  pixelRatio: 1,\n  lang: saveAsImageLang.lang.slice()\n};\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nvar proto = SaveAsImage.prototype;\n\nproto.onclick = function (ecModel, api) {\n  var model = this.model;\n  var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n  var isSvg = api.getZr().painter.getType() === 'svg';\n  var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n  var url = api.getConnectedDataURL({\n    type: type,\n    backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n    connectedBackgroundColor: model.get('connectedBackgroundColor'),\n    excludeComponents: model.get('excludeComponents'),\n    pixelRatio: model.get('pixelRatio')\n  }); // Chrome and Firefox\n\n  if (typeof MouseEvent === 'function' && !env.browser.ie && !env.browser.edge) {\n    var $a = document.createElement('a');\n    $a.download = title + '.' + type;\n    $a.target = '_blank';\n    $a.href = url;\n    var evt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: false\n    });\n    $a.dispatchEvent(evt);\n  } // IE\n  else {\n      if (window.navigator.msSaveOrOpenBlob) {\n        var bstr = atob(url.split(',')[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n\n        var blob = new Blob([u8arr]);\n        window.navigator.msSaveOrOpenBlob(blob, title + '.' + type);\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n      }\n    }\n};\n\nfeatureManager.register('saveAsImage', SaveAsImage);\nvar _default = SaveAsImage;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AXIS_DIMS = ['x', 'y', 'z', 'radius', 'angle', 'single']; // Supported coords.\n\nvar COORDS = ['cartesian2d', 'polar', 'singleAxis'];\n/**\n * @param {string} coordType\n * @return {boolean}\n */\n\nfunction isCoordSupported(coordType) {\n  return zrUtil.indexOf(COORDS, coordType) >= 0;\n}\n/**\n * Create \"each\" method to iterate names.\n *\n * @pubilc\n * @param  {Array.<string>} names\n * @param  {Array.<string>=} attrs\n * @return {Function}\n */\n\n\nfunction createNameEach(names, attrs) {\n  names = names.slice();\n  var capitalNames = zrUtil.map(names, formatUtil.capitalFirst);\n  attrs = (attrs || []).slice();\n  var capitalAttrs = zrUtil.map(attrs, formatUtil.capitalFirst);\n  return function (callback, context) {\n    zrUtil.each(names, function (name, index) {\n      var nameObj = {\n        name: name,\n        capital: capitalNames[index]\n      };\n\n      for (var j = 0; j < attrs.length; j++) {\n        nameObj[attrs[j]] = name + capitalAttrs[j];\n      }\n\n      callback.call(context, nameObj);\n    });\n  };\n}\n/**\n * Iterate each dimension name.\n *\n * @public\n * @param {Function} callback The parameter is like:\n *                            {\n *                                name: 'angle',\n *                                capital: 'Angle',\n *                                axis: 'angleAxis',\n *                                axisIndex: 'angleAixs',\n *                                index: 'angleIndex'\n *                            }\n * @param {Object} context\n */\n\n\nvar eachAxisDim = createNameEach(AXIS_DIMS, ['axisIndex', 'axis', 'index', 'id']);\n/**\n * If tow dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * dataZoomModels and 'links' make up one or more graphics.\n * This function finds the graphic where the source dataZoomModel is in.\n *\n * @public\n * @param {Function} forEachNode Node iterator.\n * @param {Function} forEachEdgeType edgeType iterator\n * @param {Function} edgeIdGetter Giving node and edgeType, return an array of edge id.\n * @return {Function} Input: sourceNode, Output: Like {nodes: [], dims: {}}\n */\n\nfunction createLinkedNodesFinder(forEachNode, forEachEdgeType, edgeIdGetter) {\n  return function (sourceNode) {\n    var result = {\n      nodes: [],\n      records: {} // key: edgeType.name, value: Object (key: edge id, value: boolean).\n\n    };\n    forEachEdgeType(function (edgeType) {\n      result.records[edgeType.name] = {};\n    });\n\n    if (!sourceNode) {\n      return result;\n    }\n\n    absorb(sourceNode, result);\n    var existsLink;\n\n    do {\n      existsLink = false;\n      forEachNode(processSingleNode);\n    } while (existsLink);\n\n    function processSingleNode(node) {\n      if (!isNodeAbsorded(node, result) && isLinked(node, result)) {\n        absorb(node, result);\n        existsLink = true;\n      }\n    }\n\n    return result;\n  };\n\n  function isNodeAbsorded(node, result) {\n    return zrUtil.indexOf(result.nodes, node) >= 0;\n  }\n\n  function isLinked(node, result) {\n    var hasLink = false;\n    forEachEdgeType(function (edgeType) {\n      zrUtil.each(edgeIdGetter(node, edgeType) || [], function (edgeId) {\n        result.records[edgeType.name][edgeId] && (hasLink = true);\n      });\n    });\n    return hasLink;\n  }\n\n  function absorb(node, result) {\n    result.nodes.push(node);\n    forEachEdgeType(function (edgeType) {\n      zrUtil.each(edgeIdGetter(node, edgeType) || [], function (edgeId) {\n        result.records[edgeType.name][edgeId] = true;\n      });\n    });\n  }\n}\n\nexports.isCoordSupported = isCoordSupported;\nexports.createNameEach = createNameEach;\nexports.eachAxisDim = eachAxisDim;\nexports.createLinkedNodesFinder = createLinkedNodesFinder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./visualMapContinuous\");\n\nrequire(\"./visualMapPiecewise\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  }\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = axisView.__splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  axisView.__splitAreaColors = newSplitAreaColors;\n}\n\nfunction rectCoordAxisHandleRemove(axisView) {\n  axisView.__splitAreaColors = null;\n}\n\nexports.rectCoordAxisBuildSplitArea = rectCoordAxisBuildSplitArea;\nexports.rectCoordAxisHandleRemove = rectCoordAxisHandleRemove;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./heatmap/HeatmapSeries\");\n\nrequire(\"./heatmap/HeatmapView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n/**\n * @param {Object} option\n * @param {string} [option.type] See visualHandlers.\n * @param {string} [option.mappingMethod] 'linear' or 'piecewise' or 'category' or 'fixed'\n * @param {Array.<number>=} [option.dataExtent] [minExtent, maxExtent],\n *                                              required when mappingMethod is 'linear'\n * @param {Array.<Object>=} [option.pieceList] [\n *                                             {value: someValue},\n *                                             {interval: [min1, max1], visual: {...}},\n *                                             {interval: [min2, max2]}\n *                                             ],\n *                                            required when mappingMethod is 'piecewise'.\n *                                            Visual for only each piece can be specified.\n * @param {Array.<string|Object>=} [option.categories] ['cate1', 'cate2']\n *                                            required when mappingMethod is 'category'.\n *                                            If no option.categories, categories is set\n *                                            as [0, 1, 2, ...].\n * @param {boolean} [option.loop=false] Whether loop mapping when mappingMethod is 'category'.\n * @param {(Array|Object|*)} [option.visual]  Visual data.\n *                                            when mappingMethod is 'category',\n *                                            visual data can be array or object\n *                                            (like: {cate1: '#222', none: '#fff'})\n *                                            or primary types (which represents\n *                                            defualt category visual), otherwise visual\n *                                            can be array or primary (which will be\n *                                            normalized to array).\n *\n */\n\nvar VisualMapping = function (option) {\n  var mappingMethod = option.mappingMethod;\n  var visualType = option.type;\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n\n  var thisOption = this.option = zrUtil.clone(option);\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.type = visualType;\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.mappingMethod = mappingMethod;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._normalizeData = normalizers[mappingMethod];\n  var visualHandler = visualHandlers[visualType];\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.applyVisual = visualHandler.applyVisual;\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.getColorMapper = visualHandler.getColorMapper;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._doMap = visualHandler._doMap[mappingMethod];\n\n  if (mappingMethod === 'piecewise') {\n    normalizeVisualRange(thisOption);\n    preprocessForPiecewise(thisOption);\n  } else if (mappingMethod === 'category') {\n    thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n    // which need no more preprocess except normalize visual.\n    : normalizeVisualRange(thisOption, true);\n  } else {\n    // mappingMethod === 'linear' or 'fixed'\n    zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n    normalizeVisualRange(thisOption);\n  }\n};\n\nVisualMapping.prototype = {\n  constructor: VisualMapping,\n  mapValueToVisual: function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._doMap(normalized, value);\n  },\n  getNormalizer: function () {\n    return zrUtil.bind(this._normalizeData, this);\n  }\n};\nvar visualHandlers = VisualMapping.visualHandlers = {\n  color: {\n    applyVisual: makeApplyVisual('color'),\n\n    /**\n     * Create a mapper function\n     * @return {Function}\n     */\n    getColorMapper: function () {\n      var thisOption = this.option;\n      return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n        !isNormalized && (value = this._normalizeData(value));\n        return doMapCategory.call(this, value);\n      } : function (value, isNormalized, out) {\n        // If output rgb array\n        // which will be much faster and useful in pixel manipulation\n        var returnRGBArray = !!out;\n        !isNormalized && (value = this._normalizeData(value));\n        out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n        return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n      }, this);\n    },\n    _doMap: {\n      linear: function (normalized) {\n        return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n      },\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  colorHue: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, value);\n  }),\n  colorSaturation: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, value);\n  }),\n  colorLightness: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, null, value);\n  }),\n  colorAlpha: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyAlpha(color, value);\n  }),\n  opacity: {\n    applyVisual: makeApplyVisual('opacity'),\n    _doMap: makeDoMap([0, 1])\n  },\n  liftZ: {\n    applyVisual: makeApplyVisual('liftZ'),\n    _doMap: {\n      linear: doMapFixed,\n      category: doMapFixed,\n      piecewise: doMapFixed,\n      fixed: doMapFixed\n    }\n  },\n  symbol: {\n    applyVisual: function (value, getter, setter) {\n      var symbolCfg = this.mapValueToVisual(value);\n\n      if (zrUtil.isString(symbolCfg)) {\n        setter('symbol', symbolCfg);\n      } else if (isObject(symbolCfg)) {\n        for (var name in symbolCfg) {\n          if (symbolCfg.hasOwnProperty(name)) {\n            setter(name, symbolCfg[name]);\n          }\n        }\n      }\n    },\n    _doMap: {\n      linear: doMapToArray,\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = doMapToArray.call(this, normalized);\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  symbolSize: {\n    applyVisual: makeApplyVisual('symbolSize'),\n    _doMap: makeDoMap([0, 1])\n  }\n};\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var visual = thisOption.visual;\n  var categoryMap = thisOption.categoryMap = {};\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      value = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), value));\n    },\n    _doMap: makeDoMap([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {};\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  return this.option.visual[0];\n}\n\nfunction makeDoMap(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n/**\n * List available visual types.\n *\n * @public\n * @return {Array.<string>}\n */\n\nVisualMapping.listVisualTypes = function () {\n  var visualTypes = [];\n  zrUtil.each(visualHandlers, function (handler, key) {\n    visualTypes.push(key);\n  });\n  return visualTypes;\n};\n/**\n * @public\n */\n\n\nVisualMapping.addVisualHandler = function (name, handler) {\n  visualHandlers[name] = handler;\n};\n/**\n * @public\n */\n\n\nVisualMapping.isValidType = function (visualType) {\n  return visualHandlers.hasOwnProperty(visualType);\n};\n/**\n * Convinent method.\n * Visual can be Object or Array or primary type.\n *\n * @public\n */\n\n\nVisualMapping.eachVisual = function (visual, callback, context) {\n  if (zrUtil.isObject(visual)) {\n    zrUtil.each(visual, callback, context);\n  } else {\n    callback.call(context, visual);\n  }\n};\n\nVisualMapping.mapVisual = function (visual, callback, context) {\n  var isPrimary;\n  var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n  VisualMapping.eachVisual(visual, function (v, key) {\n    var newVal = callback.call(context, v, key);\n    isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n  });\n  return newVisual;\n};\n/**\n * @public\n * @param {Object} obj\n * @return {Object} new object containers visual values.\n *                 If no visuals, return null.\n */\n\n\nVisualMapping.retrieveVisuals = function (obj) {\n  var ret = {};\n  var hasVisual;\n  obj && each(visualHandlers, function (h, visualType) {\n    if (obj.hasOwnProperty(visualType)) {\n      ret[visualType] = obj[visualType];\n      hasVisual = true;\n    }\n  });\n  return hasVisual ? ret : null;\n};\n/**\n * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n *\n * @public\n * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n * @return {Array.<string>} Sorted visual types.\n */\n\n\nVisualMapping.prepareVisualTypes = function (visualTypes) {\n  if (isObject(visualTypes)) {\n    var types = [];\n    each(visualTypes, function (item, type) {\n      types.push(type);\n    });\n    visualTypes = types;\n  } else if (zrUtil.isArray(visualTypes)) {\n    visualTypes = visualTypes.slice();\n  } else {\n    return [];\n  }\n\n  visualTypes.sort(function (type1, type2) {\n    // color should be front of colorSaturation, colorAlpha, ...\n    // symbol and symbolSize do not matter.\n    return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n  });\n  return visualTypes;\n};\n/**\n * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n * Other visuals are only depends on themself.\n *\n * @public\n * @param {string} visualType1\n * @param {string} visualType2\n * @return {boolean}\n */\n\n\nVisualMapping.dependsOn = function (visualType1, visualType2) {\n  return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n};\n/**\n * @param {number} value\n * @param {Array.<Object>} pieceList [{value: ..., interval: [min, max]}, ...]\n *                         Always from small to big.\n * @param {boolean} [findClosestWhenOutside=false]\n * @return {number} index\n */\n\n\nVisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n  var possibleI;\n  var abs = Infinity; // value has the higher priority.\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var pieceValue = pieceList[i].value;\n\n    if (pieceValue != null) {\n      if (pieceValue === value // FIXME\n      // It is supposed to compare value according to value type of dimension,\n      // but currently value type can exactly be string or number.\n      // Compromise for numeric-like string (like '12'), especially\n      // in the case that visualMap.categories is ['22', '33'].\n      || typeof pieceValue === 'string' && pieceValue === value + '') {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(pieceValue, i);\n    }\n  }\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var piece = pieceList[i];\n    var interval = piece.interval;\n    var close = piece.close;\n\n    if (interval) {\n      if (interval[0] === -Infinity) {\n        if (littleThan(close[1], value, interval[1])) {\n          return i;\n        }\n      } else if (interval[1] === Infinity) {\n        if (littleThan(close[0], interval[0], value)) {\n          return i;\n        }\n      } else if (littleThan(close[0], interval[0], value) && littleThan(close[1], value, interval[1])) {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(interval[0], i);\n      findClosestWhenOutside && updatePossible(interval[1], i);\n    }\n  }\n\n  if (findClosestWhenOutside) {\n    return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n  }\n\n  function updatePossible(val, index) {\n    var newAbs = Math.abs(val - value);\n\n    if (newAbs < abs) {\n      abs = newAbs;\n      possibleI = index;\n    }\n  }\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nvar _default = VisualMapping;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nvar _default = visualDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Component = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nComponent.registerSubTypeDefaulter('dataZoom', function () {\n  // Default 'slider' when no type specified.\n  return 'slider';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar ATTR = '\\0_ec_hist_store';\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} newSnapshot {dataZoomId, batch: [payloadInfo, ...]}\n */\n\nfunction push(ecModel, newSnapshot) {\n  var store = giveStore(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = store.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = store[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        store[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  store.push(newSnapshot);\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} snapshot\n */\n\n\nfunction pop(ecModel) {\n  var store = giveStore(ecModel);\n  var head = store[store.length - 1];\n  store.length > 1 && store.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = store.length - 1; i >= 0; i--) {\n      var batchItem = store[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n */\n\n\nfunction clear(ecModel) {\n  ecModel[ATTR] = null;\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n * @return {number} records. always >= 1.\n */\n\n\nfunction count(ecModel) {\n  return giveStore(ecModel).length;\n}\n/**\n * [{key: dataZoomId, value: {dataZoomId, range}}, ...]\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n * @type {Array.<Object>}\n */\n\n\nfunction giveStore(ecModel) {\n  var store = ecModel[ATTR];\n\n  if (!store) {\n    store = ecModel[ATTR] = [{}];\n  }\n\n  return store;\n}\n\nexports.push = push;\nexports.pop = pop;\nexports.clear = clear;\nexports.count = count;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By defualt auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5,\n  // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Same inside with axisTick\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#eee',\n      width: 1\n    }\n  }\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar layout = require(\"../../util/layout\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentView({\n  type: 'visualMap',\n\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n  autoPositionValues: {\n    left: 1,\n    right: 1,\n    top: 1,\n    bottom: 1\n  },\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/visualMap/visualMapModel}\n     */\n\n    this.visualMapModel;\n  },\n\n  /**\n   * @protected\n   */\n  render: function (visualMapModel, ecModel, api, payload) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender.apply(this, arguments);\n  },\n\n  /**\n   * @protected\n   */\n  renderBackground: function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new graphic.Rect({\n      z2: -1,\n      // Lay background rect on the lowest layer.\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  },\n\n  /**\n   * @protected\n   * @param {number} targetValue can be Infinity or -Infinity\n   * @param {string=} visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param {Object} [opts]\n   * @param {string=} [opts.forceState] Specify state, instead of using getValueState method.\n   * @param {string=} [opts.convertOpacityToAlpha=false] For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  getControllerVisual: function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'symbol') {\n      visualObj.symbol = visualMapModel.get('itemSymbol');\n    }\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  },\n\n  /**\n   * @protected\n   */\n  positionGroup: function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  },\n\n  /**\n   * @protected\n   * @abstract\n   */\n  doRender: zrUtil.noop\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/ContinuousModel\");\n\nrequire(\"./visualMap/ContinuousView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar dataViewLang = lang.toolbox.dataView;\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n * @param {module:echarts/model/Global} ecModel\n * @return {Object}\n * @inner\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @param {Array.<module:echarts/model/Series>} series\n * @return {string}\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(series) {\n  var tables = [];\n  zrUtil.each(series, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      columns.push(series.getRawData().mapArray(valueAxisDim, function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n * @param {Array.<module:echarts/model/Series>} series\n * @return {string}\n * @inner\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * @param {module:echarts/model/Global}\n * @return {Object}\n * @inner\n */\n\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n/**\n * @param {string} str\n * @return {Array.<Object>}\n * @inner\n */\n\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    var items = trim(lines[i]).split(itemSplitRegex);\n    var name = '';\n    var value;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n/**\n * @param {string} str\n * @param {Array.<Object>} blockMetaList\n * @return {Object}\n * @inner\n */\n\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n/**\n * @alias {module:echarts/component/toolbox/feature/DataView}\n * @constructor\n * @param {module:echarts/model/Model} model\n */\n\n\nfunction DataView(model) {\n  this._dom = null;\n  this.model = model;\n}\n\nDataView.defaultOption = {\n  show: true,\n  readOnly: false,\n  optionToContent: null,\n  contentToOption: null,\n  icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n  title: zrUtil.clone(dataViewLang.title),\n  lang: zrUtil.clone(dataViewLang.lang),\n  backgroundColor: '#fff',\n  textColor: '#000',\n  textareaColor: '#fff',\n  textareaBorderColor: '#333',\n  buttonColor: '#c23531',\n  buttonTextColor: '#fff'\n};\n\nDataView.prototype.onclick = function (ecModel, api) {\n  var container = api.getDom();\n  var model = this.model;\n\n  if (this._dom) {\n    container.removeChild(this._dom);\n  }\n\n  var root = document.createElement('div');\n  root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n  root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n  var header = document.createElement('h4');\n  var lang = model.get('lang') || [];\n  header.innerHTML = lang[0] || model.get('title');\n  header.style.cssText = 'margin: 10px 20px;';\n  header.style.color = model.get('textColor');\n  var viewMain = document.createElement('div');\n  var textarea = document.createElement('textarea');\n  viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n  var optionToContent = model.get('optionToContent');\n  var contentToOption = model.get('contentToOption');\n  var result = getContentFromModel(ecModel);\n\n  if (typeof optionToContent === 'function') {\n    var htmlOrDom = optionToContent(api.getOption());\n\n    if (typeof htmlOrDom === 'string') {\n      viewMain.innerHTML = htmlOrDom;\n    } else if (zrUtil.isDom(htmlOrDom)) {\n      viewMain.appendChild(htmlOrDom);\n    }\n  } else {\n    // Use default textarea\n    viewMain.appendChild(textarea);\n    textarea.readOnly = model.get('readOnly');\n    textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n    textarea.style.color = model.get('textColor');\n    textarea.style.borderColor = model.get('textareaBorderColor');\n    textarea.style.backgroundColor = model.get('textareaColor');\n    textarea.value = result.value;\n  }\n\n  var blockMetaList = result.meta;\n  var buttonContainer = document.createElement('div');\n  buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n  var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n  var closeButton = document.createElement('div');\n  var refreshButton = document.createElement('div');\n  buttonStyle += ';background-color:' + model.get('buttonColor');\n  buttonStyle += ';color:' + model.get('buttonTextColor');\n  var self = this;\n\n  function close() {\n    container.removeChild(root);\n    self._dom = null;\n  }\n\n  eventTool.addEventListener(closeButton, 'click', close);\n  eventTool.addEventListener(refreshButton, 'click', function () {\n    var newOption;\n\n    try {\n      if (typeof contentToOption === 'function') {\n        newOption = contentToOption(viewMain, api.getOption());\n      } else {\n        newOption = parseContents(textarea.value, blockMetaList);\n      }\n    } catch (e) {\n      close();\n      throw new Error('Data view format error ' + e);\n    }\n\n    if (newOption) {\n      api.dispatchAction({\n        type: 'changeDataView',\n        newOption: newOption\n      });\n    }\n\n    close();\n  });\n  closeButton.innerHTML = lang[1];\n  refreshButton.innerHTML = lang[2];\n  refreshButton.style.cssText = buttonStyle;\n  closeButton.style.cssText = buttonStyle;\n  !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n  buttonContainer.appendChild(closeButton);\n  root.appendChild(header);\n  root.appendChild(viewMain);\n  root.appendChild(buttonContainer);\n  viewMain.style.height = container.clientHeight - 80 + 'px';\n  container.appendChild(root);\n  this._dom = root;\n};\n\nDataView.prototype.remove = function (ecModel, api) {\n  this._dom && api.getDom().removeChild(this._dom);\n};\n\nDataView.prototype.dispose = function (ecModel, api) {\n  this.remove(ecModel, api);\n};\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      if (zrUtil.isObject(newVal) && !zrUtil.isArray(newVal)) {\n        newVal = newVal.value;\n      } // Original data has option\n\n\n      return zrUtil.defaults({\n        value: newVal\n      }, original);\n    } else {\n      return newVal;\n    }\n  });\n}\n\nfeatureManager.register('dataView', DataView);\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nvar _default = DataView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BrushController = require(\"../../helper/BrushController\");\n\nvar BrushTargetManager = require(\"../../helper/BrushTargetManager\");\n\nvar history = require(\"../../dataZoom/history\");\n\nvar sliderMove = require(\"../../helper/sliderMove\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nrequire(\"../../dataZoomSelect\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Use dataZoomSelect\nvar dataZoomLang = lang.toolbox.dataZoom;\nvar each = zrUtil.each; // Spectial component id start with \\0ec\\0, see echarts/model/Global.js~hasInnerId\n\nvar DATA_ZOOM_ID_BASE = '\\0_ec_\\0toolbox-dataZoom_';\n\nfunction DataZoom(model, ecModel, api) {\n  /**\n   * @private\n   * @type {module:echarts/component/helper/BrushController}\n   */\n  (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._isZoomActive;\n}\n\nDataZoom.defaultOption = {\n  show: true,\n  filterMode: 'filter',\n  // Icon group\n  icon: {\n    zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n    back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n  },\n  // `zoom`, `back`\n  title: zrUtil.clone(dataZoomLang.title)\n};\nvar proto = DataZoom.prototype;\n\nproto.render = function (featureModel, ecModel, api, payload) {\n  this.model = featureModel;\n  this.ecModel = ecModel;\n  this.api = api;\n  updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n  updateBackBtnStatus(featureModel, ecModel);\n};\n\nproto.onclick = function (ecModel, api, type) {\n  handlers[type].call(this);\n};\n\nproto.remove = function (ecModel, api) {\n  this._brushController.unmount();\n};\n\nproto.dispose = function (ecModel, api) {\n  this._brushController.dispose();\n};\n/**\n * @private\n */\n\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n/**\n * @private\n */\n\nproto._onBrush = function (areas, opt) {\n  if (!opt.isEnd || !areas.length) {\n    return;\n  }\n\n  var snapshot = {};\n  var ecModel = this.ecModel;\n\n  this._brushController.updateCovers([]); // remove cover\n\n\n  var brushTargetManager = new BrushTargetManager(retrieveAxisSetting(this.model.option), ecModel, {\n    include: ['grid']\n  });\n  brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n    if (coordSys.type !== 'cartesian2d') {\n      return;\n    }\n\n    var brushType = area.brushType;\n\n    if (brushType === 'rect') {\n      setBatch('x', coordSys, coordRange[0]);\n      setBatch('y', coordSys, coordRange[1]);\n    } else {\n      setBatch({\n        lineX: 'x',\n        lineY: 'y'\n      }[brushType], coordSys, coordRange);\n    }\n  });\n  history.push(ecModel, snapshot);\n\n  this._dispatchZoomAction(snapshot);\n\n  function setBatch(dimName, coordSys, minMax) {\n    var axis = coordSys.getAxis(dimName);\n    var axisModel = axis.model;\n    var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n    if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n      minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n    }\n\n    dataZoomModel && (snapshot[dataZoomModel.id] = {\n      dataZoomId: dataZoomModel.id,\n      startValue: minMax[0],\n      endValue: minMax[1]\n    });\n  }\n\n  function findDataZoom(dimName, axisModel, ecModel) {\n    var found;\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'select'\n    }, function (dzModel) {\n      var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n      has && (found = dzModel);\n    });\n    return found;\n  }\n};\n/**\n * @private\n */\n\n\nproto._dispatchZoomAction = function (snapshot) {\n  var batch = []; // Convert from hash map to array.\n\n  each(snapshot, function (batchItem, dataZoomId) {\n    batch.push(zrUtil.clone(batchItem));\n  });\n  batch.length && this.api.dispatchAction({\n    type: 'dataZoom',\n    from: this.uid,\n    batch: batch\n  });\n};\n\nfunction retrieveAxisSetting(option) {\n  var setting = {}; // Compatible with previous setting: null => all axis, false => no axis.\n\n  zrUtil.each(['xAxisIndex', 'yAxisIndex'], function (name) {\n    setting[name] = option[name];\n    setting[name] == null && (setting[name] = 'all');\n    (setting[name] === false || setting[name] === 'none') && (setting[name] = []);\n  });\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(retrieveAxisSetting(featureModel.option), ecModel, {\n    include: ['grid']\n  });\n\n  view._brushController.setPanels(brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  })).enableBrush(zoomActive ? {\n    brushType: 'auto',\n    brushStyle: {\n      // FIXME user customized?\n      lineWidth: 0,\n      fill: 'rgba(0,0,0,0.2)'\n    }\n  } : false);\n}\n\nfeatureManager.register('dataZoom', DataZoom); // Create special dataZoom option for select\n// FIXME consider the case of merge option, where axes options are not exists.\n\necharts.registerPreprocessor(function (option) {\n  if (!option) {\n    return;\n  }\n\n  var dataZoomOpts = option.dataZoom || (option.dataZoom = []);\n\n  if (!zrUtil.isArray(dataZoomOpts)) {\n    option.dataZoom = dataZoomOpts = [dataZoomOpts];\n  }\n\n  var toolboxOpt = option.toolbox;\n\n  if (toolboxOpt) {\n    // Assume there is only one toolbox\n    if (zrUtil.isArray(toolboxOpt)) {\n      toolboxOpt = toolboxOpt[0];\n    }\n\n    if (toolboxOpt && toolboxOpt.feature) {\n      var dataZoomOpt = toolboxOpt.feature.dataZoom; // FIXME: If add dataZoom when setOption in merge mode,\n      // no axis info to be added. See `test/dataZoom-extreme.html`\n\n      addForAxis('xAxis', dataZoomOpt);\n      addForAxis('yAxis', dataZoomOpt);\n    }\n  }\n\n  function addForAxis(axisName, dataZoomOpt) {\n    if (!dataZoomOpt) {\n      return;\n    } // Try not to modify model, because it is not merged yet.\n\n\n    var axisIndicesName = axisName + 'Index';\n    var givenAxisIndices = dataZoomOpt[axisIndicesName];\n\n    if (givenAxisIndices != null && givenAxisIndices !== 'all' && !zrUtil.isArray(givenAxisIndices)) {\n      givenAxisIndices = givenAxisIndices === false || givenAxisIndices === 'none' ? [] : [givenAxisIndices];\n    }\n\n    forEachComponent(axisName, function (axisOpt, axisIndex) {\n      if (givenAxisIndices != null && givenAxisIndices !== 'all' && zrUtil.indexOf(givenAxisIndices, axisIndex) === -1) {\n        return;\n      }\n\n      var newOpt = {\n        type: 'select',\n        $fromToolbox: true,\n        // Default to be filter\n        filterMode: dataZoomOpt.filterMode || 'filter',\n        // Id for merge mapping.\n        id: DATA_ZOOM_ID_BASE + axisName + axisIndex\n      }; // FIXME\n      // Only support one axis now.\n\n      newOpt[axisIndicesName] = axisIndex;\n      dataZoomOpts.push(newOpt);\n    });\n  }\n\n  function forEachComponent(mainType, cb) {\n    var opts = option[mainType];\n\n    if (!zrUtil.isArray(opts)) {\n      opts = opts ? [opts] : [];\n    }\n\n    each(opts, cb);\n  }\n});\nvar _default = DataZoom;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar ComponentView = require(\"../../view/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = ComponentView.extend({\n  type: 'dataZoom',\n  render: function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  },\n\n  /**\n   * Find the first target coordinate system.\n   *\n   * @protected\n   * @return {Object} {\n   *                   grid: [\n   *                       {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n   *                       {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n   *                       ...\n   *                   ],  // cartesians must not be null/undefined.\n   *                   polar: [\n   *                       {model: coord0, axisModels: [axis4], coordIndex: 0},\n   *                       ...\n   *                   ],  // polars must not be null/undefined.\n   *                   singleAxis: [\n   *                       {model: coord0, axisModels: [], coordIndex: 0}\n   *                   ]\n   */\n  getTargetCoordInfo: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var ecModel = this.ecModel;\n    var coordSysLists = {};\n    dataZoomModel.eachTargetAxis(function (dimNames, axisIndex) {\n      var axisModel = ecModel.getComponent(dimNames.axis, axisIndex);\n\n      if (axisModel) {\n        var coordModel = axisModel.getCoordSysModel();\n        coordModel && save(coordModel, axisModel, coordSysLists[coordModel.mainType] || (coordSysLists[coordModel.mainType] = []), coordModel.componentIndex);\n      }\n    }, this);\n\n    function save(coordModel, axisModel, store, coordIndex) {\n      var item;\n\n      for (var i = 0; i < store.length; i++) {\n        if (store[i].model === coordModel) {\n          item = store[i];\n          break;\n        }\n      }\n\n      if (!item) {\n        store.push(item = {\n          model: coordModel,\n          axisModels: [],\n          coordIndex: coordIndex\n        });\n      }\n\n      item.axisModels.push(axisModel);\n    }\n\n    return coordSysLists;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar featureManager = require(\"./featureManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ToolboxModel = echarts.extendComponentModel({\n  type: 'toolbox',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  optionUpdated: function () {\n    ToolboxModel.superApply(this, 'optionUpdated', arguments);\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.get(featureName);\n      Feature && zrUtil.merge(featureOpt, Feature.defaultOption);\n    });\n  },\n  defaultOption: {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = ToolboxModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid 是在有直角坐标系的时候必须要存在的\n// 所以这里也要被 Cartesian2D 依赖\nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar helper = require(\"./helper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerAction('dataZoom', function (payload, ecModel) {\n  var linkedNodesFinder = helper.createLinkedNodesFinder(zrUtil.bind(ecModel.eachComponent, ecModel, 'dataZoom'), helper.eachAxisDim, function (model, dimNames) {\n    return model.get(dimNames.axisIndex);\n  });\n  var effectedModels = [];\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (model, index) {\n    effectedModels.push.apply(effectedModels, linkedNodesFinder(model).nodes);\n  });\n  zrUtil.each(effectedModels, function (dataZoomModel, index) {\n    dataZoomModel.setRawRange({\n      start: payload.start,\n      end: payload.end,\n      startValue: payload.startValue,\n      endValue: payload.endValue\n    });\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip主体内容\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    // 位置 {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    // 是否约束 content 在 viewRect 中。默认 false 是为了兼容以前版本。\n    confine: false,\n    // 内容格式器：{string}（Template） ¦ {Function}\n    // formatter: null\n    showDelay: 0,\n    // 隐藏延迟，单位ms\n    hideDelay: 100,\n    // 动画变换时间，单位s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 提示背景颜色，默认为透明度为0.7的黑色\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // 提示边框颜色\n    borderColor: '#333',\n    // 提示边框圆角，单位px，默认为4\n    borderRadius: 4,\n    // 提示边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 提示内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // 坐标轴指示器，坐标轴触发有效\n    axisPointer: {\n      // 默认为直线\n      // 可选为：'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type 为 line 的时候有效，指定 tooltip line 所在的轴，可选\n      // 可选 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // 默认 'auto'，会选择类型为 category 的轴，对于双数值轴，笛卡尔坐标系会默认选择 x 轴\n      // 极坐标系会默认选择 angle 轴\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar VISUAL_PRIORITY = echarts.PRIORITY.VISUAL.COMPONENT;\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimension(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}); // Only support color.\n\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var concreteDim = visualMapModel.getDataDimension(data);\n        var dimInfo = data.getDimensionInfo(concreteDim);\n\n        if (dimInfo != null) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimInfo.index;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}); // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: seriesModel.getData().getVisual('color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./toolbox/ToolboxModel\");\n\nrequire(\"./toolbox/ToolboxView\");\n\nrequire(\"./toolbox/feature/SaveAsImage\");\n\nrequire(\"./toolbox/feature/MagicType\");\n\nrequire(\"./toolbox/feature/DataView\");\n\nrequire(\"./toolbox/feature/DataZoom\");\n\nrequire(\"./toolbox/feature/Restore\");","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-chart',{ref:\"chart\",attrs:{\"initOptions\":_vm.initOptions,\"options\":_vm.options,\"autoresize\":\"\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Prop, Ref } from \"vue-property-decorator\"\n\n// chart\nimport 'echarts/lib/chart/heatmap'\nimport 'echarts/lib/component/tooltip'\nimport 'echarts/lib/component/grid'\nimport 'echarts/lib/component/visualMap'\nimport 'echarts/lib/component/toolbox'\n\n@Component\nexport default class Heatmap extends Vue {\n\n  @Prop() readonly data!: number [][]\n  @Prop() readonly name!: string\n  @Prop() readonly categories!: string []\n  @Prop() readonly hours!: string []\n  @Prop({default: 0}) readonly rangeMin!: number\n  @Prop({default: 100}) readonly rangeMax!: number\n\n  @Ref('chart') readonly chart!: any\n  @Ref('container') readonly container!: HTMLDivElement\n\n  get initOptions() {\n    return {\n      dom: this.container\n    }\n  }\n  // printImage() {\n  //   return this.chart.getDataURL({type: \"png\", backgroundColor: '#fff'})\n  // }\n\n  get color() {\n    return this.rangeMin < 0 ? ['#4575b4', '#d88273', '#bf444c'] : ['#f6efa6', '#d88273', '#bf444c']\n  }\n\n  get options () {\n    return {\n      toolbox: {\n        showTitle: false,\n          orient: 'vertical',\n        feature: {\n          saveAsImage: {show: true, title: 'Download', name: 'Heatmap'},\n          // dataView: {show: true, readOnly: true, title: 'Datenansicht', lang: ['Datenansicht', 'zurück', 'refresh']},\n        },\n        tooltip: {\n          show: true,\n          position: 'top',\n        },\n      },\n        tooltip: {\n            position: 'top'\n        },\n        animation: false,\n        grid: {\n            height: '25%',\n            top: '5%',\n            left: '100'\n        },\n        xAxis: {\n            type: 'category',\n            data: this.hours,\n            splitArea: {\n                show: true\n            }\n        },\n        yAxis: {\n            type: 'category',\n            data: this.categories,\n            splitArea: {\n                show: true\n            }\n        },\n        visualMap: {\n            min: this.rangeMin,\n            max: this.rangeMax,\n            calculable: true,\n            orient: 'horizontal',\n            left: 'center',\n            bottom: '30%',\n            inRange: {\n              color: this.color\n            }\n        },\n        series: [{\n            name: this.name,\n            type: 'heatmap',\n            data: this.data,\n            label: {\n                show: false\n            },\n            markPoint: {\n                label: {\n                    show: false\n                }\n            },\n            emphasis: {\n                itemStyle: {\n                    shadowBlur: 10,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            }\n        }]\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Heatmap.vue?vue&type=template&id=0450adbe&\"\nimport script from \"./Heatmap.vue?vue&type=script&lang=ts&\"\nexport * from \"./Heatmap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Heatmap.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\n\nfunction _default(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Component = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nComponent.registerSubTypeDefaulter('visualMap', function (option) {\n  // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n  return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar brushHelper = require(\"./brushHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar indexOf = zrUtil.indexOf;\nvar curry = zrUtil.curry;\nvar COORD_CONVERTS = ['dataToPoint', 'pointToData']; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n/**\n * [option in constructor]:\n * {\n *     Index/Id/Name of geo, xAxis, yAxis, grid: See util/model#parseFinder.\n * }\n *\n *\n * [targetInfo]:\n *\n * There can be multiple axes in a single targetInfo. Consider the case\n * of `grid` component, a targetInfo represents a grid which contains one or more\n * cartesian and one or more axes. And consider the case of parallel system,\n * which has multiple axes in a coordinate system.\n * Can be {\n *     panelId: ...,\n *     coordSys: <a representitive cartesian in grid (first cartesian by default)>,\n *     coordSyses: all cartesians.\n *     gridModel: <grid component>\n *     xAxes: correspond to coordSyses on index\n *     yAxes: correspond to coordSyses on index\n * }\n * or {\n *     panelId: ...,\n *     coordSys: <geo coord sys>\n *     coordSyses: [<geo coord sys>]\n *     geoModel: <geo component>\n * }\n *\n *\n * [panelOpt]:\n *\n * Make from targetInfo. Input to BrushController.\n * {\n *     panelId: ...,\n *     rect: ...\n * }\n *\n *\n * [area]:\n *\n * Generated by BrushController or user input.\n * {\n *     panelId: Used to locate coordInfo directly. If user inpput, no panelId.\n *     brushType: determine how to convert to/from coord('rect' or 'polygon' or 'lineX/Y').\n *     Index/Id/Name of geo, xAxis, yAxis, grid: See util/model#parseFinder.\n *     range: pixel range.\n *     coordRange: representitive coord range (the first one of coordRanges).\n *     coordRanges: <Array> coord ranges, used in multiple cartesian in one grid.\n * }\n */\n\n/**\n * @param {Object} option contains Index/Id/Name of xAxis/yAxis/geo/grid\n *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} [opt]\n * @param {Array.<string>} [opt.include] include coordinate system types.\n */\n\nfunction BrushTargetManager(option, ecModel, opt) {\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n  var targetInfoList = this._targetInfoList = [];\n  var info = {};\n  var foundCpts = parseFinder(ecModel, option);\n  each(targetInfoBuilders, function (builder, type) {\n    if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n      builder(foundCpts, targetInfoList, info);\n    }\n  });\n}\n\nvar proto = BrushTargetManager.prototype;\n\nproto.setOutputRanges = function (areas, ecModel) {\n  this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n    (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n    if (!area.coordRange) {\n      area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n      // rebuild range by coordRange accrately, which may bring trouble when\n      // brushing only one item. So we use __rangeOffset to rebuilding range\n      // by coordRange. And this it only used in brush component so it is no\n      // need to be adapted to coordRanges.\n\n      var result = coordConvert[area.brushType](0, coordSys, coordRange);\n      area.__rangeOffset = {\n        offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n        xyMinMax: result.xyMinMax\n      };\n    }\n  });\n};\n\nproto.matchOutputRanges = function (areas, ecModel, cb) {\n  each(areas, function (area) {\n    var targetInfo = this.findTargetInfo(area, ecModel);\n\n    if (targetInfo && targetInfo !== true) {\n      zrUtil.each(targetInfo.coordSyses, function (coordSys) {\n        var result = coordConvert[area.brushType](1, coordSys, area.range);\n        cb(area, result.values, coordSys, ecModel);\n      });\n    }\n  }, this);\n};\n\nproto.setInputRanges = function (areas, ecModel) {\n  each(areas, function (area) {\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n    if (targetInfo && targetInfo !== true) {\n      area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n      // not keep its original value, for the sake of the dataZoom scenario,\n      // where area.coordRange remains unchanged but area.range may be changed.\n      // (2) Only support converting one coordRange to pixel range in brush\n      // component. So do not consider `coordRanges`.\n      // (3) About __rangeOffset, see comment above.\n\n      var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n      var rangeOffset = area.__rangeOffset;\n      area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n    }\n  }, this);\n};\n\nproto.makePanelOpts = function (api, getDefaultBrushType) {\n  return zrUtil.map(this._targetInfoList, function (targetInfo) {\n    var rect = targetInfo.getPanelRect();\n    return {\n      panelId: targetInfo.panelId,\n      defaultBrushType: getDefaultBrushType && getDefaultBrushType(targetInfo),\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n    };\n  });\n};\n\nproto.controlSeries = function (area, seriesModel, ecModel) {\n  // Check whether area is bound in coord, and series do not belong to that coord.\n  // If do not do this check, some brush (like lineX) will controll all axes.\n  var targetInfo = this.findTargetInfo(area, ecModel);\n  return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n};\n/**\n * If return Object, a coord found.\n * If reutrn true, global found.\n * Otherwise nothing found.\n *\n * @param {Object} area\n * @param {Array} targetInfoList\n * @return {Object|boolean}\n */\n\n\nproto.findTargetInfo = function (area, ecModel) {\n  var targetInfoList = this._targetInfoList;\n  var foundCpts = parseFinder(ecModel, area);\n\n  for (var i = 0; i < targetInfoList.length; i++) {\n    var targetInfo = targetInfoList[i];\n    var areaPanelId = area.panelId;\n\n    if (areaPanelId) {\n      if (targetInfo.panelId === areaPanelId) {\n        return targetInfo;\n      }\n    } else {\n      for (var i = 0; i < targetInfoMatchers.length; i++) {\n        if (targetInfoMatchers[i](foundCpts, targetInfo)) {\n          return targetInfo;\n        }\n      }\n    }\n  }\n\n  return true;\n};\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, option) {\n  return modelUtil.parseFinder(ecModel, option, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = zrUtil.createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilder.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilder.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilder = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.grid.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange) {\n    var xminymin = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]]);\n    var xmaxymax = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]]);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = zrUtil.map(rangeOrCoordRange, function (item) {\n      var p = coordSys[COORD_CONVERTS[to]](item);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(zrUtil.map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i])) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return zrUtil.map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nvar _default = BrushTargetManager;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/component/visualMap/VisualMapModel} visualMapModel\\\n * @param {module:echarts/ExtensionAPI} api\n * @param {Array.<number>} itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nfunction getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n\n\nfunction makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}\n\nexports.getItemAlign = getItemAlign;\nexports.makeHighDownBatch = makeHighDownBatch;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar helper = require(\"./helper\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n *\n * @class\n */\n\nvar AxisProxy = function (dimName, axisIndex, dataZoomModel, ecModel) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this._dimName = dimName;\n  /**\n   * @private\n   */\n\n  this._axisIndex = axisIndex;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._valueWindow;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._percentWindow;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._dataExtent;\n  /**\n   * {minSpan, maxSpan, minValueSpan, maxValueSpan}\n   * @private\n   * @type {Object}\n   */\n\n  this._minMaxSpan;\n  /**\n   * @readOnly\n   * @type {module: echarts/model/Global}\n   */\n\n  this.ecModel = ecModel;\n  /**\n   * @private\n   * @type {module: echarts/component/dataZoom/DataZoomModel}\n   */\n\n  this._dataZoomModel = dataZoomModel; // /**\n  //  * @readOnly\n  //  * @private\n  //  */\n  // this.hasSeriesStacked;\n};\n\nAxisProxy.prototype = {\n  constructor: AxisProxy,\n\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   *\n   * @public\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   * @return {boolean}\n   */\n  hostedBy: function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  },\n\n  /**\n   * @return {Array.<number>} Value can only be NaN or finite value.\n   */\n  getDataValueWindow: function () {\n    return this._valueWindow.slice();\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getDataPercentWindow: function () {\n    return this._percentWindow.slice();\n  },\n\n  /**\n   * @public\n   * @param {number} axisIndex\n   * @return {Array} seriesModels\n   */\n  getTargetSeriesModels: function () {\n    var seriesModels = [];\n    var ecModel = this.ecModel;\n    ecModel.eachSeries(function (seriesModel) {\n      if (helper.isCoordSupported(seriesModel.get('coordinateSystem'))) {\n        var dimName = this._dimName;\n        var axisModel = ecModel.queryComponents({\n          mainType: dimName + 'Axis',\n          index: seriesModel.get(dimName + 'AxisIndex'),\n          id: seriesModel.get(dimName + 'AxisId')\n        })[0];\n\n        if (this._axisIndex === (axisModel && axisModel.componentIndex)) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  },\n  getAxisModel: function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  },\n  getOtherAxisModel: function () {\n    var axisDim = this._dimName;\n    var ecModel = this.ecModel;\n    var axisModel = this.getAxisModel();\n    var isCartesian = axisDim === 'x' || axisDim === 'y';\n    var otherAxisDim;\n    var coordSysIndexName;\n\n    if (isCartesian) {\n      coordSysIndexName = 'gridIndex';\n      otherAxisDim = axisDim === 'x' ? 'y' : 'x';\n    } else {\n      coordSysIndexName = 'polarIndex';\n      otherAxisDim = axisDim === 'angle' ? 'radius' : 'angle';\n    }\n\n    var foundOtherAxisModel;\n    ecModel.eachComponent(otherAxisDim + 'Axis', function (otherAxisModel) {\n      if ((otherAxisModel.get(coordSysIndexName) || 0) === (axisModel.get(coordSysIndexName) || 0)) {\n        foundOtherAxisModel = otherAxisModel;\n      }\n    });\n    return foundOtherAxisModel;\n  },\n  getMinMaxSpan: function () {\n    return zrUtil.clone(this._minMaxSpan);\n  },\n\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   *\n   * @param {Object} opt\n   * @param {number} [opt.start]\n   * @param {number} [opt.end]\n   * @param {number} [opt.startValue]\n   * @param {number} [opt.endValue]\n   */\n  calculateDataWindow: function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  },\n\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   *\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  reset: function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // this.hasSeriesStacked = false;\n    // each(targetSeries, function (series) {\n    // var data = series.getData();\n    // var dataDim = data.mapDimension(this._dimName);\n    // var stackedDimension = data.getCalculationInfo('stackedDimension');\n    // if (stackedDimension && stackedDimension === dataDim) {\n    // this.hasSeriesStacked = true;\n    // }\n    // }, this);\n    // `calculateDataWindow` uses min/maxSpan.\n\n    setMinMaxSpan(this);\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    setAxisModel(this);\n  },\n\n  /**\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  restore: function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    this._valueWindow = this._percentWindow = null;\n    setAxisModel(this, true);\n  },\n\n  /**\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  filterData: function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // var otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimension(axisDim, true);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = seriesData.get(dataDims[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  }\n};\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    var seriesData = seriesModel.getData();\n\n    if (seriesData) {\n      each(seriesData.mapDimension(axisDim, true), function (dim) {\n        var seriesExtent = seriesData.getApproximateExtent(dim);\n        seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n        seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n      });\n    }\n  });\n\n  if (dataExtent[1] < dataExtent[0]) {\n    dataExtent = [NaN, NaN];\n  } // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n\n  fixExtentByAxis(axisProxy, dataExtent);\n  return dataExtent;\n}\n\nfunction fixExtentByAxis(axisProxy, dataExtent) {\n  var axisModel = axisProxy.getAxisModel();\n  var min = axisModel.getMin(true); // For category axis, if min/max/scale are not set, extent is determined\n  // by axis.data by default.\n\n  var isCategoryAxis = axisModel.get('type') === 'category';\n  var axisDataLen = isCategoryAxis && axisModel.getCategories().length;\n\n  if (min != null && min !== 'dataMin' && typeof min !== 'function') {\n    dataExtent[0] = min;\n  } else if (isCategoryAxis) {\n    dataExtent[0] = axisDataLen > 0 ? 0 : NaN;\n  }\n\n  var max = axisModel.getMax(true);\n\n  if (max != null && max !== 'dataMax' && typeof max !== 'function') {\n    dataExtent[1] = max;\n  } else if (isCategoryAxis) {\n    dataExtent[1] = axisDataLen > 0 ? axisDataLen - 1 : NaN;\n  }\n\n  if (!axisModel.get('scale', true)) {\n    dataExtent[0] > 0 && (dataExtent[0] = 0);\n    dataExtent[1] < 0 && (dataExtent[1] = 0);\n  } // For value axis, if min/max/scale are not set, we just use the extent obtained\n  // by series data, which may be a little different from the extent calculated by\n  // `axisHelper.getScaleExtent`. But the different just affects the experience a\n  // little when zooming. So it will not be fixed until some users require it strongly.\n\n\n  return dataExtent;\n}\n\nfunction setAxisModel(axisProxy, isRestore) {\n  var axisModel = axisProxy.getAxisModel();\n  var percentWindow = axisProxy._percentWindow;\n  var valueWindow = axisProxy._valueWindow;\n\n  if (!percentWindow) {\n    return;\n  } // [0, 500]: arbitrary value, guess axis extent.\n\n\n  var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n  precision = Math.min(precision, 20); // isRestore or isFull\n\n  var useOrigin = isRestore || percentWindow[0] === 0 && percentWindow[1] === 100;\n  axisModel.setRange(useOrigin ? null : +valueWindow[0].toFixed(precision), useOrigin ? null : +valueWindow[1].toFixed(precision));\n}\n\nfunction setMinMaxSpan(axisProxy) {\n  var minMaxSpan = axisProxy._minMaxSpan = {};\n  var dataZoomModel = axisProxy._dataZoomModel;\n  var dataExtent = axisProxy._dataExtent;\n  each(['min', 'max'], function (minMax) {\n    var percentSpan = dataZoomModel.get(minMax + 'Span');\n    var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n    valueSpan != null && (valueSpan = axisProxy.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n    if (valueSpan != null) {\n      percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n    } else if (percentSpan != null) {\n      valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n    }\n\n    minMaxSpan[minMax + 'Span'] = percentSpan;\n    minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n  });\n}\n\nvar _default = AxisProxy;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./gridSimple\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\nrequire(\"./axisPointer\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Uint8ClampedArray */\nvar GRADIENT_LEVELS = 256;\n/**\n * Heatmap Chart\n *\n * @class\n */\n\nfunction Heatmap() {\n  var canvas = zrUtil.createCanvas();\n  this.canvas = canvas;\n  this.blurSize = 30;\n  this.pointSize = 20;\n  this.maxOpacity = 1;\n  this.minOpacity = 0;\n  this._gradientPixels = {};\n}\n\nHeatmap.prototype = {\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param {Array} data array of data, each has x, y, value\n   * @param {number} width canvas width\n   * @param {number} height canvas height\n   */\n  update: function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n\n    var gradientInRange = this._getGradient(data, colorFunc, 'inRange');\n\n    var gradientOutOfRange = this._getGradient(data, colorFunc, 'outOfRange');\n\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2]; // calculate alpha using value\n\n      var alpha = normalize(value); // draw with the circle brush with alpha\n\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    } // colorize the canvas using alpha value and set with gradient\n\n\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\n\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  },\n\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   * @private\n   * @returns {Object} circle brush canvas\n   */\n  _getBrush: function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = zrUtil.createCanvas()); // set brush size\n\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\n\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  },\n\n  /**\n   * get gradient color map\n   * @private\n   */\n  _getGradient: function (data, colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n\n    return pixelsSingleState;\n  }\n};\nvar _default = Heatmap;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar magicTypeLang = lang.toolbox.magicType;\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\n\nfunction MagicType(model) {\n  this.model = model;\n}\n\nMagicType.defaultOption = {\n  show: true,\n  type: [],\n  // Icon group\n  icon: {\n    /* eslint-disable */\n    line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n    bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n    stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n    /* eslint-enable */\n\n  },\n  // `line`, `bar`, `stack`, `tiled`\n  title: zrUtil.clone(magicTypeLang.title),\n  option: {},\n  seriesIndex: {}\n};\nvar proto = MagicType.prototype;\n\nproto.getIcons = function () {\n  var model = this.model;\n  var availableIcons = model.get('icon');\n  var icons = {};\n  zrUtil.each(model.get('type'), function (type) {\n    if (availableIcons[type]) {\n      icons[type] = availableIcons[type];\n    }\n  });\n  return icons;\n};\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get('option.line') || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get('option.bar') || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get('option.stack') || {}, true);\n    }\n  }\n};\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nproto.onclick = function (ecModel, api, type) {\n  var model = this.model;\n  var seriesIndex = model.get('seriesIndex.' + type); // Not supported magicType\n\n  if (!seriesOptGenreator[type]) {\n    return;\n  }\n\n  var newOption = {\n    series: []\n  };\n\n  var generateNewSeriesTypes = function (seriesModel) {\n    var seriesType = seriesModel.subType;\n    var seriesId = seriesModel.id;\n    var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n    if (newSeriesOpt) {\n      // PENDING If merge original option?\n      zrUtil.defaults(newSeriesOpt, seriesModel.option);\n      newOption.series.push(newSeriesOpt);\n    } // Modify boundaryGap\n\n\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n      var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n      if (categoryAxis) {\n        var axisDim = categoryAxis.dim;\n        var axisType = axisDim + 'Axis';\n        var axisModel = ecModel.queryComponents({\n          mainType: axisType,\n          index: seriesModel.get(name + 'Index'),\n          id: seriesModel.get(name + 'Id')\n        })[0];\n        var axisIndex = axisModel.componentIndex;\n        newOption[axisType] = newOption[axisType] || [];\n\n        for (var i = 0; i <= axisIndex; i++) {\n          newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n        }\n\n        newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n      }\n    }\n  };\n\n  zrUtil.each(radioTypes, function (radio) {\n    if (zrUtil.indexOf(radio, type) >= 0) {\n      zrUtil.each(radio, function (item) {\n        model.setIconStatus(item, 'normal');\n      });\n    }\n  });\n  model.setIconStatus(type, 'emphasis');\n  ecModel.eachComponent({\n    mainType: 'series',\n    query: seriesIndex == null ? null : {\n      seriesIndex: seriesIndex\n    }\n  }, generateNewSeriesTypes);\n  var newTitle; // Change title of stack\n\n  if (type === 'stack') {\n    var isStack = newOption.series && newOption.series[0] && newOption.series[0].stack === INNER_STACK_KEYWORD;\n    newTitle = isStack ? zrUtil.merge({\n      stack: magicTypeLang.title.tiled\n    }, magicTypeLang.title) : zrUtil.clone(magicTypeLang.title);\n  }\n\n  api.dispatchAction({\n    type: 'changeMagicType',\n    currentType: type,\n    newOption: newOption,\n    newTitle: newTitle,\n    featureName: 'magicType'\n  });\n};\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nfeatureManager.register('magicType', MagicType);\nvar _default = MagicType;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar featureManager = require(\"./featureManager\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\nvar listComponentHelper = require(\"../helper/listComponent\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentView({\n  type: 'toolbox',\n  render: function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            model: featureModel,\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = featureManager.get(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature(featureModel, ecModel, api);\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n\n        feature.model = featureModel;\n        feature.ecModel = ecModel;\n        feature.api = api;\n      }\n\n      if (!featureName && oldName) {\n        feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || feature.unusable) {\n        feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status; // FIXME\n\n        iconPaths[iconName] && iconPaths[iconName].trigger(status);\n      };\n\n      if (feature.render) {\n        feature.render(featureModel, ecModel, api, payload);\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel('emphasis.iconStyle'); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n\n      if (typeof icons === 'string') {\n        var icon = icons;\n        var title = titles;\n        icons = {};\n        titles = {};\n        icons[featureName] = icon;\n        titles[featureName] = title;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(icons, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        });\n        path.setStyle(iconStyleModel.getItemStyle());\n        path.hoverStyle = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        path.setStyle({\n          text: titles[iconName],\n          textAlign: iconStyleEmphasisModel.get('textAlign'),\n          textBorderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n          textPadding: iconStyleEmphasisModel.get('textPadding'),\n          textFill: null\n        });\n        var tooltipModel = toolboxModel.getModel('tooltip');\n\n        if (tooltipModel && tooltipModel.get('show')) {\n          path.attr('tooltip', zrUtil.extend({\n            content: titles[iconName],\n            formatter: tooltipModel.get('formatter', true) || function () {\n              return titles[iconName];\n            },\n            formatterParams: {\n              componentType: 'toolbox',\n              name: iconName,\n              title: titles[iconName],\n              $vars: ['name', 'title']\n            },\n            position: tooltipModel.get('position', true) || 'bottom'\n          }, tooltipModel.option));\n        }\n\n        graphic.setHoverStyle(path);\n\n        if (toolboxModel.get('showTitle')) {\n          path.__title = titles[iconName];\n          path.on('mouseover', function () {\n            // Should not reuse above hoverStyle, which might be modified.\n            var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n            var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n            path.setStyle({\n              textFill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n              textBackgroundColor: iconStyleEmphasisModel.get('textBackgroundColor'),\n              textPosition: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n            });\n          }).on('mouseout', function () {\n            path.setStyle({\n              textFill: null,\n              textBackgroundColor: null\n            });\n          });\n        }\n\n        path.trigger(featureModel.get('iconStatus.' + iconName) || 'normal');\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      var hoverStyle = icon.hoverStyle; // May be background element\n\n      if (hoverStyle && titleText) {\n        var rect = textContain.getBoundingRect(titleText, textContain.makeFont(hoverStyle));\n        var offsetX = icon.position[0] + group.position[0];\n        var offsetY = icon.position[1] + group.position[1] + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          hoverStyle.textPosition = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          hoverStyle.textPosition = ['100%', topOffset];\n          hoverStyle.textAlign = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          hoverStyle.textPosition = [0, topOffset];\n          hoverStyle.textAlign = 'left';\n        }\n      }\n    });\n  },\n  updateView: function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  },\n  // updateLayout: function (toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  remove: function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  },\n  dispose: function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature.dispose && feature.dispose(ecModel, api);\n    });\n  }\n});\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./dataZoom/typeDefaulter\");\n\nrequire(\"./dataZoom/DataZoomModel\");\n\nrequire(\"./dataZoom/DataZoomView\");\n\nrequire(\"./dataZoom/SelectZoomModel\");\n\nrequire(\"./dataZoom/SelectZoomView\");\n\nrequire(\"./dataZoom/dataZoomProcessor\");\n\nrequire(\"./dataZoom/dataZoomAction\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../../echarts\");\n\nvar history = require(\"../../dataZoom/history\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar restoreLang = lang.toolbox.restore;\n\nfunction Restore(model) {\n  this.model = model;\n}\n\nRestore.defaultOption = {\n  show: true,\n\n  /* eslint-disable */\n  icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n\n  /* eslint-enable */\n  title: restoreLang.title\n};\nvar proto = Restore.prototype;\n\nproto.onclick = function (ecModel, api, type) {\n  history.clear(ecModel);\n  api.dispatchAction({\n    type: 'restore',\n    from: this.uid\n  });\n};\n\nfeatureManager.register('restore', Restore);\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nvar _default = Restore;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center' ¦ 'left' ¦ 'right' ¦ {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top' ¦ 'bottom' ¦ 'center' ¦ {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal' ¦ 'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // 值域边框颜色\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // 值域边框线宽，单位px，默认为0（无边框）\n    padding: 5,\n    // 值域内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    //\n    precision: 0,\n    // 小数精度，默认为0，无小数点\n    color: null,\n    //颜色（deprecated，兼容ec2，顺序同pieces，不同于inRange/outOfRange）\n    formatter: null,\n    text: null,\n    // 文本，如['高', '低']，兼容ec2，text[0]对应高值，text[1]对应低值\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the defualt color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=style&index=0&lang=css&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param {number} delta Move length.\n * @param {Array.<number>} handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param {Array.<number>} extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param {number|string} handleIndex Can be 'all', means that both move the two handleEnds.\n * @param {number} [minSpan] The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param {number} [maxSpan] The range of dataZoom can not be larger than that.\n * @return {Array.<number>} The input handleEnds.\n */\nfunction _default(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar _axisSplitHelper = require(\"./axisSplitHelper\");\n\nvar rectCoordAxisBuildSplitArea = _axisSplitHelper.rectCoordAxisBuildSplitArea;\nvar rectCoordAxisHandleRemove = _axisSplitHelper.rectCoordAxisHandleRemove;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    rectCoordAxisHandleRemove(this);\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(this, this._axisGroup, axisModel, gridModel);\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _cursorHelper = require(\"./cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphicUtil = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints, transform) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\n\nfunction makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\n\nfunction makeRectIsTargetByCursor(rect, api, targetModel) {\n  rect = normalizeRect(rect);\n  return function (e, localCursorPoint, transform) {\n    return rect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}\n\nexports.makeRectPanelClipPath = makeRectPanelClipPath;\nexports.makeLinearBrushOtherExtent = makeLinearBrushOtherExtent;\nexports.makeRectIsTargetByCursor = makeRectIsTargetByCursor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar map = zrUtil.map;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(0,0,0,0.3)',\n    fill: 'rgba(0,0,0,0.1)'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * @alias module:echarts/component/helper/BrushController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n * @event module:echarts/component/helper/BrushController#brush\n *        params:\n *            areas: Array.<Array>, coord relates to container group,\n *                                    If no container specified, to global.\n *            opt {\n *                isEnd: boolean,\n *                removeOnClick: boolean\n *            }\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\n\nfunction BrushController(zr) {\n  Eventful.call(this);\n  /**\n   * @type {module:zrender/zrender~ZRender}\n   * @private\n   */\n\n  this._zr = zr;\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = new graphic.Group();\n  /**\n   * Only for drawing (after enabledBrush).\n   *     'line', 'rect', 'polygon' or false\n   *     If passing false/null/undefined, disable brush.\n   *     If passing 'auto', determined by panel.defaultBrushType\n   * @private\n   * @type {string}\n   */\n\n  this._brushType;\n  /**\n   * Only for drawing (after enabledBrush).\n   *\n   * @private\n   * @type {Object}\n   */\n\n  this._brushOption;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._panels;\n  /**\n   * @private\n   * @type {Array.<nubmer>}\n   */\n\n  this._track = [];\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._dragging;\n  /**\n   * @private\n   * @type {Array}\n   */\n\n  this._covers = [];\n  /**\n   * @private\n   * @type {moudule:zrender/container/Group}\n   */\n\n  this._creatingCover;\n  /**\n   * `true` means global panel\n   * @private\n   * @type {module:zrender/container/Group|boolean}\n   */\n\n  this._creatingPanel;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._enableGlobalPan;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this._uid = 'brushController_' + baseUID++;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._handlers = {};\n  each(pointerHandlers, function (handler, eventName) {\n    this._handlers[eventName] = zrUtil.bind(handler, this);\n  }, this);\n}\n\nBrushController.prototype = {\n  constructor: BrushController,\n\n  /**\n   * If set to null/undefined/false, select disabled.\n   * @param {Object} brushOption\n   * @param {string|boolean} brushOption.brushType 'line', 'rect', 'polygon' or false\n   *                          If passing false/null/undefined, disable brush.\n   *                          If passing 'auto', determined by panel.defaultBrushType.\n   *                              ('auto' can not be used in global panel)\n   * @param {number} [brushOption.brushMode='single'] 'single' or 'multiple'\n   * @param {boolean} [brushOption.transformable=true]\n   * @param {boolean} [brushOption.removeOnClick=false]\n   * @param {Object} [brushOption.brushStyle]\n   * @param {number} [brushOption.brushStyle.width]\n   * @param {number} [brushOption.brushStyle.lineWidth]\n   * @param {string} [brushOption.brushStyle.stroke]\n   * @param {string} [brushOption.brushStyle.fill]\n   * @param {number} [brushOption.z]\n   */\n  enableBrush: function (brushOption) {\n    this._brushType && doDisableBrush(this);\n    brushOption.brushType && doEnableBrush(this, brushOption);\n    return this;\n  },\n\n  /**\n   * @param {Array.<Object>} panelOpts If not pass, it is global brush.\n   *        Each items: {\n   *            panelId, // mandatory.\n   *            clipPath, // mandatory. function.\n   *            isTargetByCursor, // mandatory. function.\n   *            defaultBrushType, // optional, only used when brushType is 'auto'.\n   *            getLinearBrushOtherExtent, // optional. function.\n   *        }\n   */\n  setPanels: function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels = this._panels = {};\n      zrUtil.each(panelOpts, function (panelOpts) {\n        panels[panelOpts.panelId] = zrUtil.clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param {Object} [opt]\n   * @return {boolean} [opt.enableGlobalPan=false]\n   */\n  mount: function (opt) {\n    opt = opt || {};\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      position: opt.position || [0, 0],\n      rotation: opt.rotation || 0,\n      scale: opt.scale || [1, 1]\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  },\n  eachCover: function (cb, context) {\n    each(this._covers, cb, context);\n  },\n\n  /**\n   * Update covers.\n   * @param {Array.<Object>} brushOptionList Like:\n   *        [\n   *            {id: 'xx', brushType: 'line', range: [23, 44], brushStyle, transformable},\n   *            {id: 'yy', brushType: 'rect', range: [[23, 44], [23, 54]]},\n   *            ...\n   *        ]\n   *        `brushType` is required in each cover info. (can not be 'auto')\n   *        `id` is not mandatory.\n   *        `brushStyle`, `transformable` is not mandatory, use DEFAULT_BRUSH_OPT by default.\n   *        If brushOptionList is null/undefined, all covers removed.\n   */\n  updateCovers: function (brushOptionList) {\n    brushOptionList = zrUtil.map(brushOptionList, function (brushOption) {\n      return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, brushOptionList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushOption = brushOptionList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushOption, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushOption));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  },\n  unmount: function () {\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    return this;\n  },\n  dispose: function () {\n    this.unmount();\n    this.off();\n  }\n};\nzrUtil.mixin(BrushController, Eventful);\n\nfunction doEnableBrush(controller, brushOption) {\n  var zr = controller._zr; // Consider roam, which takes globalPan too.\n\n  if (!controller._enableGlobalPan) {\n    interactionMutex.take(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  }\n\n  mountHandlers(zr, controller._handlers);\n  controller._brushType = brushOption.brushType;\n  controller._brushOption = zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n}\n\nfunction doDisableBrush(controller) {\n  var zr = controller._zr;\n  interactionMutex.release(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  unmountHandlers(zr, controller._handlers);\n  controller._brushType = controller._brushOption = null;\n}\n\nfunction mountHandlers(zr, handlers) {\n  each(handlers, function (handler, eventName) {\n    zr.on(eventName, handler);\n  });\n}\n\nfunction unmountHandlers(zr, handlers) {\n  each(handlers, function (handler, eventName) {\n    zr.off(eventName, handler);\n  });\n}\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : true;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = zrUtil.clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', areas, {\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\nfunction createBaseRectCover(doDrift, controller, brushOption, edgeNames) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(doDrift, controller, cover, 'nswe'),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNames, function (name) {\n    cover.add(new graphic.Rect({\n      name: name,\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(doDrift, controller, cover, name),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each(['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw'], function (name) {\n    var el = cover.childOfName(name);\n    var globalDir = getGlobalDirection(controller, name);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return zrUtil.defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], // x range\n  [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection(controller, localDirection) {\n  if (localDirection.length > 1) {\n    localDirection = localDirection.split('');\n    var globalDir = [getGlobalDirection(controller, localDirection[0]), getGlobalDirection(controller, localDirection[1])];\n    (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n    return globalDir.join('');\n  } else {\n    var map = {\n      w: 'left',\n      e: 'right',\n      n: 'top',\n      s: 'bottom'\n    };\n    var inverseMap = {\n      left: 'w',\n      right: 'e',\n      top: 'n',\n      bottom: 's'\n    };\n    var globalDir = graphic.transformDirection(map[localDirection], getTransform(controller));\n    return inverseMap[globalDir];\n  }\n}\n\nfunction driftRect(toRectRange, fromRectRange, controller, cover, name, dx, dy, e) {\n  var brushOption = cover.__brushOption;\n  var rectRange = toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(name.split(''), function (namePart) {\n    var ind = DIRECTION_MAP[namePart];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy, e) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== true ? panel.clipPath(data, controller._transform) : zrUtil.clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === true || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = zrUtil.clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === true ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mose out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n * @type {Object}\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        return range;\n      }, function (range) {\n        return range;\n      }), controller, brushOption, ['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw']);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        var rectRange = [range, [0, 100]];\n        xyIndex && rectRange.reverse();\n        return rectRange;\n      }, function (rectRange) {\n        return rectRange[xyIndex];\n      }), controller, brushOption, [['w', 'e'], ['n', 's']][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== true && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex, controller._transform);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nvar _default = BrushController;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}